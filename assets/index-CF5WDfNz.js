import{X as P,Z as W,_ as C,C as H,a2 as k,a4 as I,V as y,a5 as S,c as g,M as v,z as E,$ as L,a0 as R,Y as T}from"./OrbitControls-DYZe1cjh.js";import{O as D}from"./OBB-DACWSzlM.js";import{S as O}from"./stats.module--VATS4Kh.js";import{s as V,o as A,c as F,b as G}from"./index-BnFIS60n.js";const X={class:"main-container w-full h-full"},Y=G("div",{id:"target",class:"w-full h-full"},null,-1),q=[Y],K={__name:"index",setup(N){let r,d,s,x,u,f,h,m;const i=[],w=new P;V(()=>{_(),M()});function _(){r=new W(70,window.innerWidth/window.innerHeight,1,1e3),r.position.set(0,0,75),d=new C,d.background=new H(16777215),x=new T,h=new k;const n=new I(16777215,2236962,1.5);n.position.set(1,1,1),d.add(n);const o=new y(10,5,6),a=new S(o.x,o.y,o.z);a.userData.obb=new D,a.userData.obb.halfSize.copy(o).multiplyScalar(.5);for(let e=0;e<100;e++){const t=new g(a,new v({color:65280}));t.matrixAutoUpdate=!1,t.position.x=Math.random()*80-40,t.position.y=Math.random()*80-40,t.position.z=Math.random()*80-40,t.rotation.x=Math.random()*2*Math.PI,t.rotation.y=Math.random()*2*Math.PI,t.rotation.z=Math.random()*2*Math.PI,t.scale.x=Math.random()+.5,t.scale.y=Math.random()+.5,t.scale.z=Math.random()+.5,d.add(t),t.userData.obb=new D,t.userData.obb.copy(t.geometry.userData.obb),t.userData.obb.applyMatrix4(t.matrixWorld),i.push(t)}m=new g(a,new E({color:0,wireframe:!0})),s=new L({antialias:!0}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),document.getElementById("target").appendChild(s.domElement),u=new R(r,s.domElement),u.enableDamping=!0,f=new O,document.body.appendChild(f.dom),window.addEventListener("resize",B),document.addEventListener("click",j)}function j(n){n.preventDefault(),w.x=n.clientX/window.innerWidth*2-1,w.y=-(n.clientY/window.innerHeight)*2+1,h.setFromCamera(w,r);const o=new y,a=[];for(let e=0,t=i.length;e<t;e++){const c=i[e],b=c.userData.obb,l=h.ray;if(b.intersectRay(l,o)!==null){const p=l.origin.distanceTo(o);a.push({distance:p,object:c})}}if(a.length>0)a.sort(z),a[0].object.add(m);else{const e=m.parent;e&&e.remove(m)}}function z(n,o){return n.distance-o.distance}function B(){r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function M(){requestAnimationFrame(M),u.update();const n=x.getDelta();for(let o=0,a=i.length;o<a;o++){const e=i[o];e.rotation.x+=n*Math.PI*.2,e.rotation.y+=n*Math.PI*.1,e.updateMatrix(),e.updateMatrixWorld(),e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld),e.material.color.setHex(65280)}for(let o=0,a=i.length;o<a;o++){const e=i[o],t=e.userData.obb;for(let c=o+1,b=i.length;c<b;c++){const l=i[c],p=l.userData.obb;t.intersectsOBB(p)===!0&&(e.material.color.setHex(16711680),l.material.color.setHex(16711680))}}s.render(d,r),f.update()}return(n,o)=>(A(),F("div",X,q))}};export{K as default};
