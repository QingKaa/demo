var je=Object.defineProperty;var Ke=(p,e,t)=>e in p?je(p,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[e]=t;var x=(p,e,t)=>Ke(p,typeof e!="symbol"?e+"":e,t);import{L as Se,F as Z,S as H,a as C,B as Ne,b as W,C as F,c as X,d as Ve,P as ze,D as We,M as z,e as O,V as De,f as Q,g as U,I as Xe,h as qe,O as ue,T as $,i as Ye,j as Ze,k as ve,l as Ce,R as J,m as Qe,n as te,o as $e,p as Oe,q as de,r as Je,s as et,t as ke,u as tt,v as nt,w as st,x as it,G as Y,y as at,z as ot,A as rt,E as ct,H as lt,J as ut,K as Pe,N as fe,Q as Be,U as dt,W as pt,X as ft,Y as ht,Z as mt,_ as gt,$ as Tt,a0 as At,a1 as yt,a2 as he,a3 as bt,a4 as Et,a5 as me,a6 as ge,a7 as Te,a8 as Lt,a9 as It,aa as wt,ab as Rt,ac as xt,ad as Mt,ae as _t,af as ne,ag as Ae,ah as Ft,ai as ee,aj as St,ak as ye,al as be,am as Ee,an as Nt,ao as re,ap as Dt,aq as vt,ar as Ct,as as Ot,at as kt}from"./ThreeHelper-DQm0ufBX.js";import{L as Pt}from"./Loading-bRhNeifx.js";import{t as Le,g as Bt,c as Gt,a as Ut,b as Ht,f as jt,d as Kt}from"./share-CjLDRW5V.js";import{d as Vt,a as zt,i as Wt,q as Xt,r as qt,o as Ie,c as we,b as w,R as Yt,u as K,m as Zt,g as Qt,aa as $t,p as Jt,h as e0,t as t0,_ as n0}from"./index-DFCbcl6P.js";import"./isObject-D7bzW4Uf.js";const se=new WeakMap;class s0 extends Se{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,s,n){const a=new Z(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,i=>{this.parse(i,t,n)},s,n)}parse(e,t,s=()=>{}){this.decodeDracoFile(e,t,null,null,H).catch(s)}decodeDracoFile(e,t,s,n,a=C,i=()=>{}){const r={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:a};return this.decodeGeometry(e,r).then(t).catch(i)}decodeGeometry(e,t){const s=JSON.stringify(t);if(se.has(e)){const o=se.get(e);if(o.key===s)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const a=this.workerNextTaskID++,i=e.byteLength,r=this._getWorker(a,i).then(o=>(n=o,new Promise((c,u)=>{n._callbacks[a]={resolve:c,reject:u},n.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return r.catch(()=>!0).then(()=>{n&&a&&this._releaseTask(n,a)}),se.set(e,{key:s,promise:r}),r}_createGeometry(e){const t=new Ne;e.index&&t.setIndex(new W(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s],a=n.name,i=n.array,r=n.itemSize,o=new W(i,r);a==="color"&&(this._assignVertexColorSpace(o,n.vertexColorSpace),o.normalized=!(i instanceof Float32Array)),t.setAttribute(a,o)}return t}_assignVertexColorSpace(e,t){if(t!==H)return;const s=new F;for(let n=0,a=e.count;n<a;n++)s.fromBufferAttribute(e,n).convertSRGBToLinear(),e.setXYZ(n,s.r,s.g,s.b)}_loadLibrary(e,t){const s=new Z(this.manager);return s.setPath(this.decoderPath),s.setResponseType(t),s.setWithCredentials(this.withCredentials),new Promise((n,a)=>{s.load(e,n,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(s=>{const n=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const a=i0.toString(),i=["/* draco decoder */",n,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(a){const i=a.data;switch(i.type){case"decode":n._callbacks[i.id].resolve(i);break;case"error":n._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,a){return n._taskLoad>a._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=t,s._taskLoad+=t,s})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function i0(){let p,e;onmessage=function(i){const r=i.data;switch(r.type){case"init":p=r.decoderConfig,e=new Promise(function(u){p.onModuleLoaded=function(l){u({draco:l})},DracoDecoderModule(p)});break;case"decode":const o=r.buffer,c=r.taskConfig;e.then(u=>{const l=u.draco,d=new l.Decoder;try{const f=t(l,d,new Int8Array(o),c),m=f.attributes.map(T=>T.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:r.id,error:f.message})}finally{l.destroy(d)}});break}};function t(i,r,o,c){const u=c.attributeIDs,l=c.attributeTypes;let d,f;const m=r.GetEncodedGeometryType(o);if(m===i.TRIANGULAR_MESH)d=new i.Mesh,f=r.DecodeArrayToMesh(o,o.byteLength,d);else if(m===i.POINT_CLOUD)d=new i.PointCloud,f=r.DecodeArrayToPointCloud(o,o.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const T={index:null,attributes:[]};for(const g in u){const h=self[l[g]];let A,E;if(c.useUniqueIDs)E=u[g],A=r.GetAttributeByUniqueId(d,E);else{if(E=r.GetAttributeId(d,i[u[g]]),E===-1)continue;A=r.GetAttribute(d,E)}const y=n(i,r,d,g,h,A);g==="color"&&(y.vertexColorSpace=c.vertexColorSpace),T.attributes.push(y)}return m===i.TRIANGULAR_MESH&&(T.index=s(i,r,d)),i.destroy(d),T}function s(i,r,o){const u=o.num_faces()*3,l=u*4,d=i._malloc(l);r.GetTrianglesUInt32Array(o,l,d);const f=new Uint32Array(i.HEAPF32.buffer,d,u).slice();return i._free(d),{array:f,itemSize:1}}function n(i,r,o,c,u,l){const d=l.num_components(),m=o.num_points()*d,T=m*u.BYTES_PER_ELEMENT,g=a(i,u),h=i._malloc(T);r.GetAttributeDataArrayForAllPoints(o,l,g,T,h);const A=new u(i.HEAPF32.buffer,h,m).slice();return i._free(h),{name:c,array:A,itemSize:d}}function a(i,r){switch(r){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}class a0 extends Se{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new u0(t)}),this.register(function(t){return new y0(t)}),this.register(function(t){return new b0(t)}),this.register(function(t){return new E0(t)}),this.register(function(t){return new p0(t)}),this.register(function(t){return new f0(t)}),this.register(function(t){return new h0(t)}),this.register(function(t){return new m0(t)}),this.register(function(t){return new l0(t)}),this.register(function(t){return new g0(t)}),this.register(function(t){return new d0(t)}),this.register(function(t){return new A0(t)}),this.register(function(t){return new T0(t)}),this.register(function(t){return new r0(t)}),this.register(function(t){return new L0(t)}),this.register(function(t){return new I0(t)})}load(e,t,s,n){const a=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const c=X.extractUrlBase(e);i=X.resolveURL(c,this.path)}else i=X.extractUrlBase(e);this.manager.itemStart(e);const r=function(c){n?n(c):console.error(c),a.manager.itemError(e),a.manager.itemEnd(e)},o=new Z(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{a.parse(c,i,function(u){t(u),a.manager.itemEnd(e)},r)}catch(u){r(u)}},s,r)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,n){let a;const i={},r={},o=new TextDecoder;if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(o.decode(new Uint8Array(e,0,4))===Ge){try{i[b.KHR_BINARY_GLTF]=new w0(e)}catch(l){n&&n(l);return}a=JSON.parse(i[b.KHR_BINARY_GLTF].content)}else a=JSON.parse(o.decode(e));else a=e;if(a.asset===void 0||a.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new P0(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const l=this.pluginCallbacks[u](c);l.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),r[l.name]=l,i[l.name]=!0}if(a.extensionsUsed)for(let u=0;u<a.extensionsUsed.length;++u){const l=a.extensionsUsed[u],d=a.extensionsRequired||[];switch(l){case b.KHR_MATERIALS_UNLIT:i[l]=new c0;break;case b.KHR_DRACO_MESH_COMPRESSION:i[l]=new R0(a,this.dracoLoader);break;case b.KHR_TEXTURE_TRANSFORM:i[l]=new x0;break;case b.KHR_MESH_QUANTIZATION:i[l]=new M0;break;default:d.indexOf(l)>=0&&r[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}c.setExtensions(i),c.setPlugins(r),c.parse(s,n)}parseAsync(e,t){const s=this;return new Promise(function(n,a){s.parse(e,t,n,a)})}}function o0(){let p={};return{get:function(e){return p[e]},add:function(e,t){p[e]=t},remove:function(e){delete p[e]},removeAll:function(){p={}}}}const b={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class r0{constructor(e){this.parser=e,this.name=b.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let s=0,n=t.length;s<n;s++){const a=t[s];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let n=t.cache.get(s);if(n)return n;const a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let c;const u=new F(16777215);o.color!==void 0&&u.setRGB(o.color[0],o.color[1],o.color[2],C);const l=o.range!==void 0?o.range:0;switch(o.type){case"directional":c=new We(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new ze(u),c.distance=l;break;case"spot":c=new Ve(u),c.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,c.angle=o.spot.outerConeAngle,c.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return c.position.set(0,0,0),c.decay=2,B(c,o),o.intensity!==void 0&&(c.intensity=o.intensity),c.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(c),t.cache.add(s,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,s=this.parser,a=s.json.nodes[e],r=(a.extensions&&a.extensions[this.name]||{}).light;return r===void 0?null:this._loadLight(r).then(function(o){return s._getNodeRef(t.cache,r,o)})}}class c0{constructor(){this.name=b.KHR_MATERIALS_UNLIT}getMaterialType(){return z}extendParams(e,t,s){const n=[];e.color=new F(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const i=a.baseColorFactor;e.color.setRGB(i[0],i[1],i[2],C),e.opacity=i[3]}a.baseColorTexture!==void 0&&n.push(s.assignTexture(e,"map",a.baseColorTexture,H))}return Promise.all(n)}}class l0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=n.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class u0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];if(i.clearcoatFactor!==void 0&&(t.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&a.push(s.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&a.push(s.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(a.push(s.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const r=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(r,r)}return Promise.all(a)}}class d0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];return i.iridescenceFactor!==void 0&&(t.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&a.push(s.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(t.iridescenceIOR=i.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&a.push(s.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(a)}}class p0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new F(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=n.extensions[this.name];if(i.sheenColorFactor!==void 0){const r=i.sheenColorFactor;t.sheenColor.setRGB(r[0],r[1],r[2],C)}return i.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&a.push(s.assignTexture(t,"sheenColorMap",i.sheenColorTexture,H)),i.sheenRoughnessTexture!==void 0&&a.push(s.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(a)}}class f0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];return i.transmissionFactor!==void 0&&(t.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&a.push(s.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}class h0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];t.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&a.push(s.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const r=i.attenuationColor||[1,1,1];return t.attenuationColor=new F().setRGB(r[0],r[1],r[2],C),Promise.all(a)}}class m0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=n.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class g0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];t.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&a.push(s.assignTexture(t,"specularIntensityMap",i.specularTexture));const r=i.specularColorFactor||[1,1,1];return t.specularColor=new F().setRGB(r[0],r[1],r[2],C),i.specularColorTexture!==void 0&&a.push(s.assignTexture(t,"specularColorMap",i.specularColorTexture,H)),Promise.all(a)}}class T0{constructor(e){this.parser=e,this.name=b.EXT_MATERIALS_BUMP}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];return t.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&a.push(s.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(a)}}class A0{constructor(e){this.parser=e,this.name=b.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:O}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],i=n.extensions[this.name];return i.anisotropyStrength!==void 0&&(t.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(t.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&a.push(s.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(a)}}class y0{constructor(e){this.parser=e,this.name=b.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,s=t.json,n=s.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const a=n.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,i)}}class b0{constructor(e){this.parser=e,this.name=b.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,n=s.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;const i=a.extensions[t],r=n.images[i.source];let o=s.textureLoader;if(r.uri){const c=s.options.manager.getHandler(r.uri);c!==null&&(o=c)}return this.detectSupport().then(function(c){if(c)return s.loadTextureImage(e,i.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class E0{constructor(e){this.parser=e,this.name=b.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,n=s.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;const i=a.extensions[t],r=n.images[i.source];let o=s.textureLoader;if(r.uri){const c=s.options.manager.getHandler(r.uri);c!==null&&(o=c)}return this.detectSupport().then(function(c){if(c)return s.loadTextureImage(e,i.source,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class L0{constructor(e){this.name=b.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,s=t.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const n=s.extensions[this.name],a=this.parser.getDependency("buffer",n.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(r){const o=n.byteOffset||0,c=n.byteLength||0,u=n.count,l=n.byteStride,d=new Uint8Array(r,o,c);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(u,l,d,n.mode,n.filter).then(function(f){return f.buffer}):i.ready.then(function(){const f=new ArrayBuffer(u*l);return i.decodeGltfBuffer(new Uint8Array(f),u,l,d,n.mode,n.filter),f})})}else return null}}class I0{constructor(e){this.name=b.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const n=t.meshes[s.mesh];for(const c of n.primitives)if(c.mode!==v.TRIANGLES&&c.mode!==v.TRIANGLE_STRIP&&c.mode!==v.TRIANGLE_FAN&&c.mode!==void 0)return null;const i=s.extensions[this.name].attributes,r=[],o={};for(const c in i)r.push(this.parser.getDependency("accessor",i[c]).then(u=>(o[c]=u,o[c])));return r.length<1?null:(r.push(this.parser.createNodeMesh(e)),Promise.all(r).then(c=>{const u=c.pop(),l=u.isGroup?u.children:[u],d=c[0].count,f=[];for(const m of l){const T=new Q,g=new U,h=new Be,A=new U(1,1,1),E=new Xe(m.geometry,m.material,d);for(let y=0;y<d;y++)o.TRANSLATION&&g.fromBufferAttribute(o.TRANSLATION,y),o.ROTATION&&h.fromBufferAttribute(o.ROTATION,y),o.SCALE&&A.fromBufferAttribute(o.SCALE,y),E.setMatrixAt(y,T.compose(g,h,A));for(const y in o)if(y==="_COLOR_0"){const S=o[y];E.instanceColor=new qe(S.array,S.itemSize,S.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&m.geometry.setAttribute(y,o[y]);ue.prototype.copy.call(E,m),this.parser.assignFinalMaterial(E),f.push(E)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const Ge="glTF",V=12,Re={JSON:1313821514,BIN:5130562};class w0{constructor(e){this.name=b.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,V),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ge)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-V,a=new DataView(e,V);let i=0;for(;i<n;){const r=a.getUint32(i,!0);i+=4;const o=a.getUint32(i,!0);if(i+=4,o===Re.JSON){const c=new Uint8Array(e,V+i,r);this.content=s.decode(c)}else if(o===Re.BIN){const c=V+i;this.body=e.slice(c,c+r)}i+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class R0{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=b.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,n=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,r={},o={},c={};for(const u in i){const l=ce[u]||u.toLowerCase();r[l]=i[u]}for(const u in e.attributes){const l=ce[u]||u.toLowerCase();if(i[u]!==void 0){const d=s.accessors[e.attributes[u]],f=j[d.componentType];c[l]=f.name,o[l]=d.normalized===!0}}return t.getDependency("bufferView",a).then(function(u){return new Promise(function(l,d){n.decodeDracoFile(u,function(f){for(const m in f.attributes){const T=f.attributes[m],g=o[m];g!==void 0&&(T.normalized=g)}l(f)},r,c,C,d)})})}}class x0{constructor(){this.name=b.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class M0{constructor(){this.name=b.KHR_MESH_QUANTIZATION}}class Ue extends wt{constructor(e,t,s,n){super(e,t,s,n)}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,n=this.valueSize,a=e*n*3+n;for(let i=0;i!==n;i++)t[i]=s[a+i];return t}interpolate_(e,t,s,n){const a=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=r*2,c=r*3,u=n-t,l=(s-t)/u,d=l*l,f=d*l,m=e*c,T=m-c,g=-2*f+3*d,h=f-d,A=1-g,E=h-d+l;for(let y=0;y!==r;y++){const S=i[T+y+r],N=i[T+y+o]*u,M=i[m+y+r],R=i[m+y]*u;a[y]=A*S+E*N+g*M+h*R}return a}}const _0=new Be;class F0 extends Ue{interpolate_(e,t,s,n){const a=super.interpolate_(e,t,s,n);return _0.fromArray(a).normalize().toArray(a),a}}const v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},j={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xe={9728:dt,9729:ve,9984:pt,9985:ft,9986:ht,9987:Ce},Me={33071:mt,33648:gt,10497:J},ie={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ce={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},P={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S0={CUBICSPLINE:void 0,LINEAR:Pe,STEP:Tt},ae={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function N0(p){return p.DefaultMaterial===void 0&&(p.DefaultMaterial=new Oe({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:At})),p.DefaultMaterial}function G(p,e,t){for(const s in t.extensions)p[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=t.extensions[s])}function B(p,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(p.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function D0(p,e,t){let s=!1,n=!1,a=!1;for(let c=0,u=e.length;c<u;c++){const l=e[c];if(l.POSITION!==void 0&&(s=!0),l.NORMAL!==void 0&&(n=!0),l.COLOR_0!==void 0&&(a=!0),s&&n&&a)break}if(!s&&!n&&!a)return Promise.resolve(p);const i=[],r=[],o=[];for(let c=0,u=e.length;c<u;c++){const l=e[c];if(s){const d=l.POSITION!==void 0?t.getDependency("accessor",l.POSITION):p.attributes.position;i.push(d)}if(n){const d=l.NORMAL!==void 0?t.getDependency("accessor",l.NORMAL):p.attributes.normal;r.push(d)}if(a){const d=l.COLOR_0!==void 0?t.getDependency("accessor",l.COLOR_0):p.attributes.color;o.push(d)}}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(o)]).then(function(c){const u=c[0],l=c[1],d=c[2];return s&&(p.morphAttributes.position=u),n&&(p.morphAttributes.normal=l),a&&(p.morphAttributes.color=d),p.morphTargetsRelative=!0,p})}function v0(p,e){if(p.updateMorphTargets(),e.weights!==void 0)for(let t=0,s=e.weights.length;t<s;t++)p.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(p.morphTargetInfluences.length===t.length){p.morphTargetDictionary={};for(let s=0,n=t.length;s<n;s++)p.morphTargetDictionary[t[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function C0(p){let e;const t=p.extensions&&p.extensions[b.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+oe(t.attributes):e=p.indices+":"+oe(p.attributes)+":"+p.mode,p.targets!==void 0)for(let s=0,n=p.targets.length;s<n;s++)e+=":"+oe(p.targets[s]);return e}function oe(p){let e="";const t=Object.keys(p).sort();for(let s=0,n=t.length;s<n;s++)e+=t[s]+":"+p[t[s]]+";";return e}function le(p){switch(p){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O0(p){return p.search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0?"image/jpeg":p.search(/\.webp($|\?)/i)>0||p.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const k0=new Q;class P0{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new o0,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,n=!1,a=-1;typeof navigator<"u"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,a=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||s||n&&a<98?this.textureLoader=new $(this.options.manager):this.textureLoader=new Ye(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Z(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const s=this,n=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(i){const r={scene:i[0][n.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:n.asset,parser:s,userData:{}};return G(a,r,n),B(r,n),Promise.all(s._invokeAll(function(o){return o.afterRoot&&o.afterRoot(r)})).then(function(){for(const o of r.scenes)o.updateMatrixWorld();e(r)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let n=0,a=t.length;n<a;n++){const i=t[n].joints;for(let r=0,o=i.length;r<o;r++)e[i[r]].isBone=!0}for(let n=0,a=e.length;n<a;n++){const i=e[n];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(s[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;const n=s.clone(),a=(i,r)=>{const o=this.associations.get(i);o!=null&&this.associations.set(r,o);for(const[c,u]of i.children.entries())a(u,r.children[c])};return a(s,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){const n=e(t[s]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const s=[];for(let n=0;n<t.length;n++){const a=e(t[n]);a&&s.push(a)}return s}getDependency(e,t){const s=e+":"+t;let n=this.cache.get(s);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":n=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(s,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const s=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(a,i){return s.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[b.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(a,i){s.load(X.resolveURL(t.uri,n.path),a,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(s){const n=t.byteLength||0,a=t.byteOffset||0;return s.slice(a,a+n)})}loadAccessor(e){const t=this,s=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const i=ie[n.type],r=j[n.componentType],o=n.normalized===!0,c=new r(n.count*i);return Promise.resolve(new W(c,i,o))}const a=[];return n.bufferView!==void 0?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),n.sparse!==void 0&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(a).then(function(i){const r=i[0],o=ie[n.type],c=j[n.componentType],u=c.BYTES_PER_ELEMENT,l=u*o,d=n.byteOffset||0,f=n.bufferView!==void 0?s.bufferViews[n.bufferView].byteStride:void 0,m=n.normalized===!0;let T,g;if(f&&f!==l){const h=Math.floor(d/f),A="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+h+":"+n.count;let E=t.cache.get(A);E||(T=new c(r,h*f,n.count*f/u),E=new Ze(T,f/u),t.cache.add(A,E)),g=new yt(E,o,d%f/u,m)}else r===null?T=new c(n.count*o):T=new c(r,d,n.count*o),g=new W(T,o,m);if(n.sparse!==void 0){const h=ie.SCALAR,A=j[n.sparse.indices.componentType],E=n.sparse.indices.byteOffset||0,y=n.sparse.values.byteOffset||0,S=new A(i[1],E,n.sparse.count*h),N=new c(i[2],y,n.sparse.count*o);r!==null&&(g=new W(g.array.slice(),g.itemSize,g.normalized));for(let M=0,R=S.length;M<R;M++){const _=S[M];if(g.setX(_,N[M*o]),o>=2&&g.setY(_,N[M*o+1]),o>=3&&g.setZ(_,N[M*o+2]),o>=4&&g.setW(_,N[M*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,s=this.options,a=t.textures[e].source,i=t.images[a];let r=this.textureLoader;if(i.uri){const o=s.manager.getHandler(i.uri);o!==null&&(r=o)}return this.loadTextureImage(e,a,r)}loadTextureImage(e,t,s){const n=this,a=this.json,i=a.textures[e],r=a.images[t],o=(r.uri||r.bufferView)+":"+i.sampler;if(this.textureCache[o])return this.textureCache[o];const c=this.loadImageSource(t,s).then(function(u){u.flipY=!1,u.name=i.name||r.name||"",u.name===""&&typeof r.uri=="string"&&r.uri.startsWith("data:image/")===!1&&(u.name=r.uri);const d=(a.samplers||{})[i.sampler]||{};return u.magFilter=xe[d.magFilter]||ve,u.minFilter=xe[d.minFilter]||Ce,u.wrapS=Me[d.wrapS]||J,u.wrapT=Me[d.wrapT]||J,n.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[o]=c,c}loadImageSource(e,t){const s=this,n=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const i=n.images[e],r=self.URL||self.webkitURL;let o=i.uri||"",c=!1;if(i.bufferView!==void 0)o=s.getDependency("bufferView",i.bufferView).then(function(l){c=!0;const d=new Blob([l],{type:i.mimeType});return o=r.createObjectURL(d),o});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(o).then(function(l){return new Promise(function(d,f){let m=d;t.isImageBitmapLoader===!0&&(m=function(T){const g=new he(T);g.needsUpdate=!0,d(g)}),t.load(X.resolveURL(l,a.path),m,void 0,f)})}).then(function(l){return c===!0&&r.revokeObjectURL(o),l.userData.mimeType=i.mimeType||O0(i.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),l});return this.sourceCache[e]=u,u}assignTexture(e,t,s,n){const a=this;return this.getDependency("texture",s.index).then(function(i){if(!i)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(i=i.clone(),i.channel=s.texCoord),a.extensions[b.KHR_TEXTURE_TRANSFORM]){const r=s.extensions!==void 0?s.extensions[b.KHR_TEXTURE_TRANSFORM]:void 0;if(r){const o=a.associations.get(i);i=a.extensions[b.KHR_TEXTURE_TRANSFORM].extendTexture(i,r),a.associations.set(i,o)}}return n!==void 0&&(i.colorSpace=n),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const n=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,i=t.attributes.normal===void 0;if(e.isPoints){const r="PointsMaterial:"+s.uuid;let o=this.cache.get(r);o||(o=new Qe,te.prototype.copy.call(o,s),o.color.copy(s.color),o.map=s.map,o.sizeAttenuation=!1,this.cache.add(r,o)),s=o}else if(e.isLine){const r="LineBasicMaterial:"+s.uuid;let o=this.cache.get(r);o||(o=new $e,te.prototype.copy.call(o,s),o.color.copy(s.color),o.map=s.map,this.cache.add(r,o)),s=o}if(n||a||i){let r="ClonedMaterial:"+s.uuid+":";n&&(r+="derivative-tangents:"),a&&(r+="vertex-colors:"),i&&(r+="flat-shading:");let o=this.cache.get(r);o||(o=s.clone(),a&&(o.vertexColors=!0),i&&(o.flatShading=!0),n&&(o.normalScale&&(o.normalScale.y*=-1),o.clearcoatNormalScale&&(o.clearcoatNormalScale.y*=-1)),this.cache.add(r,o),this.associations.set(o,this.associations.get(s))),s=o}e.material=s}getMaterialType(){return Oe}loadMaterial(e){const t=this,s=this.json,n=this.extensions,a=s.materials[e];let i;const r={},o=a.extensions||{},c=[];if(o[b.KHR_MATERIALS_UNLIT]){const l=n[b.KHR_MATERIALS_UNLIT];i=l.getMaterialType(),c.push(l.extendParams(r,a,t))}else{const l=a.pbrMetallicRoughness||{};if(r.color=new F(1,1,1),r.opacity=1,Array.isArray(l.baseColorFactor)){const d=l.baseColorFactor;r.color.setRGB(d[0],d[1],d[2],C),r.opacity=d[3]}l.baseColorTexture!==void 0&&c.push(t.assignTexture(r,"map",l.baseColorTexture,H)),r.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,r.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(r,"metalnessMap",l.metallicRoughnessTexture)),c.push(t.assignTexture(r,"roughnessMap",l.metallicRoughnessTexture))),i=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,r)})))}a.doubleSided===!0&&(r.side=de);const u=a.alphaMode||ae.OPAQUE;if(u===ae.BLEND?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,u===ae.MASK&&(r.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&i!==z&&(c.push(t.assignTexture(r,"normalMap",a.normalTexture)),r.normalScale=new De(1,1),a.normalTexture.scale!==void 0)){const l=a.normalTexture.scale;r.normalScale.set(l,l)}if(a.occlusionTexture!==void 0&&i!==z&&(c.push(t.assignTexture(r,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(r.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&i!==z){const l=a.emissiveFactor;r.emissive=new F().setRGB(l[0],l[1],l[2],C)}return a.emissiveTexture!==void 0&&i!==z&&c.push(t.assignTexture(r,"emissiveMap",a.emissiveTexture,H)),Promise.all(c).then(function(){const l=new i(r);return a.name&&(l.name=a.name),B(l,a),t.associations.set(l,{materials:e}),a.extensions&&G(n,l,a),l})}createUniqueName(e){const t=Je.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,s=this.extensions,n=this.primitiveCache;function a(r){return s[b.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(r,t).then(function(o){return _e(o,r,t)})}const i=[];for(let r=0,o=e.length;r<o;r++){const c=e[r],u=C0(c),l=n[u];if(l)i.push(l.promise);else{let d;c.extensions&&c.extensions[b.KHR_DRACO_MESH_COMPRESSION]?d=a(c):d=_e(new Ne,c,t),n[u]={primitive:c,promise:d},i.push(d)}}return Promise.all(i)}loadMesh(e){const t=this,s=this.json,n=this.extensions,a=s.meshes[e],i=a.primitives,r=[];for(let o=0,c=i.length;o<c;o++){const u=i[o].material===void 0?N0(this.cache):this.getDependency("material",i[o].material);r.push(u)}return r.push(t.loadGeometries(i)),Promise.all(r).then(function(o){const c=o.slice(0,o.length-1),u=o[o.length-1],l=[];for(let f=0,m=u.length;f<m;f++){const T=u[f],g=i[f];let h;const A=c[f];if(g.mode===v.TRIANGLES||g.mode===v.TRIANGLE_STRIP||g.mode===v.TRIANGLE_FAN||g.mode===void 0)h=a.isSkinnedMesh===!0?new et(T,A):new ke(T,A),h.isSkinnedMesh===!0&&h.normalizeSkinWeights(),g.mode===v.TRIANGLE_STRIP?h.geometry=Le(h.geometry,bt):g.mode===v.TRIANGLE_FAN&&(h.geometry=Le(h.geometry,Et));else if(g.mode===v.LINES)h=new tt(T,A);else if(g.mode===v.LINE_STRIP)h=new nt(T,A);else if(g.mode===v.LINE_LOOP)h=new st(T,A);else if(g.mode===v.POINTS)h=new it(T,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(h.geometry.morphAttributes).length>0&&v0(h,a),h.name=t.createUniqueName(a.name||"mesh_"+e),B(h,a),g.extensions&&G(n,h,g),t.assignFinalMaterial(h),l.push(h)}for(let f=0,m=l.length;f<m;f++)t.associations.set(l[f],{meshes:e,primitives:f});if(l.length===1)return a.extensions&&G(n,l[0],a),l[0];const d=new Y;a.extensions&&G(n,d,a),t.associations.set(d,{meshes:e});for(let f=0,m=l.length;f<m;f++)d.add(l[f]);return d})}loadCamera(e){let t;const s=this.json.cameras[e],n=s[s.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?t=new at(ot.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):s.type==="orthographic"&&(t=new rt(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),B(t,s),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],s=[];for(let n=0,a=t.joints.length;n<a;n++)s.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(n){const a=n.pop(),i=n,r=[],o=[];for(let c=0,u=i.length;c<u;c++){const l=i[c];if(l){r.push(l);const d=new Q;a!==null&&d.fromArray(a.array,c*16),o.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new ct(r,o)})}loadAnimation(e){const t=this.json,s=this,n=t.animations[e],a=n.name?n.name:"animation_"+e,i=[],r=[],o=[],c=[],u=[];for(let l=0,d=n.channels.length;l<d;l++){const f=n.channels[l],m=n.samplers[f.sampler],T=f.target,g=T.node,h=n.parameters!==void 0?n.parameters[m.input]:m.input,A=n.parameters!==void 0?n.parameters[m.output]:m.output;T.node!==void 0&&(i.push(this.getDependency("node",g)),r.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",A)),c.push(m),u.push(T))}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(c),Promise.all(u)]).then(function(l){const d=l[0],f=l[1],m=l[2],T=l[3],g=l[4],h=[];for(let A=0,E=d.length;A<E;A++){const y=d[A],S=f[A],N=m[A],M=T[A],R=g[A];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();const _=s._createAnimationTracks(y,S,N,M,R);if(_)for(let k=0;k<_.length;k++)h.push(_[k])}return new lt(a,void 0,h)})}createNodeMesh(e){const t=this.json,s=this,n=t.nodes[e];return n.mesh===void 0?null:s.getDependency("mesh",n.mesh).then(function(a){const i=s._getNodeRef(s.meshCache,n.mesh,a);return n.weights!==void 0&&i.traverse(function(r){if(r.isMesh)for(let o=0,c=n.weights.length;o<c;o++)r.morphTargetInfluences[o]=n.weights[o]}),i})}loadNode(e){const t=this.json,s=this,n=t.nodes[e],a=s._loadNodeShallow(e),i=[],r=n.children||[];for(let c=0,u=r.length;c<u;c++)i.push(s.getDependency("node",r[c]));const o=n.skin===void 0?Promise.resolve(null):s.getDependency("skin",n.skin);return Promise.all([a,Promise.all(i),o]).then(function(c){const u=c[0],l=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,k0)});for(let f=0,m=l.length;f<m;f++)u.add(l[f]);return u})}_loadNodeShallow(e){const t=this.json,s=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],i=a.name?n.createUniqueName(a.name):"",r=[],o=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return o&&r.push(o),a.camera!==void 0&&r.push(n.getDependency("camera",a.camera).then(function(c){return n._getNodeRef(n.cameraCache,a.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){r.push(c)}),this.nodeCache[e]=Promise.all(r).then(function(c){let u;if(a.isBone===!0?u=new ut:c.length>1?u=new Y:c.length===1?u=c[0]:u=new ue,u!==c[0])for(let l=0,d=c.length;l<d;l++)u.add(c[l]);if(a.name&&(u.userData.name=a.name,u.name=i),B(u,a),a.extensions&&G(s,u,a),a.matrix!==void 0){const l=new Q;l.fromArray(a.matrix),u.applyMatrix4(l)}else a.translation!==void 0&&u.position.fromArray(a.translation),a.rotation!==void 0&&u.quaternion.fromArray(a.rotation),a.scale!==void 0&&u.scale.fromArray(a.scale);return n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,s=this.json.scenes[e],n=this,a=new Y;s.name&&(a.name=n.createUniqueName(s.name)),B(a,s),s.extensions&&G(t,a,s);const i=s.nodes||[],r=[];for(let o=0,c=i.length;o<c;o++)r.push(n.getDependency("node",i[o]));return Promise.all(r).then(function(o){for(let u=0,l=o.length;u<l;u++)a.add(o[u]);const c=u=>{const l=new Map;for(const[d,f]of n.associations)(d instanceof te||d instanceof he)&&l.set(d,f);return u.traverse(d=>{const f=n.associations.get(d);f!=null&&l.set(d,f)}),l};return n.associations=c(a),a})}_createAnimationTracks(e,t,s,n,a){const i=[],r=e.name?e.name:e.uuid,o=[];P[a.path]===P.weights?e.traverse(function(d){d.morphTargetInfluences&&o.push(d.name?d.name:d.uuid)}):o.push(r);let c;switch(P[a.path]){case P.weights:c=ge;break;case P.rotation:c=Te;break;case P.position:case P.scale:c=me;break;default:switch(s.itemSize){case 1:c=ge;break;case 2:case 3:default:c=me;break}break}const u=n.interpolation!==void 0?S0[n.interpolation]:Pe,l=this._getArrayFromAccessor(s);for(let d=0,f=o.length;d<f;d++){const m=new c(o[d]+"."+P[a.path],t.array,l,u);n.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),i.push(m)}return i}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const s=le(t.constructor),n=new Float32Array(t.length);for(let a=0,i=t.length;a<i;a++)n[a]=t[a]*s;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(s){const n=this instanceof Te?F0:Ue;return new n(this.times,this.values,this.getValueSize()/3,s)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function B0(p,e,t){const s=e.attributes,n=new Lt;if(s.POSITION!==void 0){const r=t.json.accessors[s.POSITION],o=r.min,c=r.max;if(o!==void 0&&c!==void 0){if(n.set(new U(o[0],o[1],o[2]),new U(c[0],c[1],c[2])),r.normalized){const u=le(j[r.componentType]);n.min.multiplyScalar(u),n.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const r=new U,o=new U;for(let c=0,u=a.length;c<u;c++){const l=a[c];if(l.POSITION!==void 0){const d=t.json.accessors[l.POSITION],f=d.min,m=d.max;if(f!==void 0&&m!==void 0){if(o.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),o.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),o.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),d.normalized){const T=le(j[d.componentType]);o.multiplyScalar(T)}r.max(o)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(r)}p.boundingBox=n;const i=new It;n.getCenter(i.center),i.radius=n.min.distanceTo(n.max)/2,p.boundingSphere=i}function _e(p,e,t){const s=e.attributes,n=[];function a(i,r){return t.getDependency("accessor",i).then(function(o){p.setAttribute(r,o)})}for(const i in s){const r=ce[i]||i.toLowerCase();r in p.attributes||n.push(a(s[i],r))}if(e.indices!==void 0&&!p.index){const i=t.getDependency("accessor",e.indices).then(function(r){p.setIndex(r)});n.push(i)}return fe.workingColorSpace!==C&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${fe.workingColorSpace}" not supported.`),B(p,e),B0(p,e,t),Promise.all(n).then(function(){return e.targets!==void 0?D0(p,e.targets,t):p})}const G0="/demo/";class U0{constructor(e=`${G0}draco/`){x(this,"gltfLoader");x(this,"dracoLoader");this.gltfLoader=new a0,this.dracoLoader=new s0,this.dracoLoader.setDecoderPath(e),console.log("  =====> this.dracoLoader:",this.dracoLoader),this.gltfLoader.setDRACOLoader(this.dracoLoader)}loadModel(e,t){this.gltfLoader.load(e,s=>{t&&t(s)})}loadModelAsync(e){return this.gltfLoader.loadAsync(e)}}function H0(p,e){const{color:t,tagId:s,running:n,isReverse:a}=p.userData;let i={...p.userData,isReverse:!!a,tagId:s,color:t,isActive:!!n,deviceNos:[]};const r=j0(p.points);let o=r.getLength();const c=V0(o,e),u=new Rt({transparent:!0,emissiveIntensity:2,side:de,emissive:new F(t),map:c});let l=Math.floor((o+1)*10);const d=new xt(r,l,.04,5,!1),f=new ke(d,u);f.renderOrder=1,i.modelId=f.id;const{position:m,scale:T,rotation:g,name:h}=p,[A,E,y]=m,[S,N,M]=T,[R,_,k]=g;return f.position.set(A,E,y),f.scale.set(S,N,M),f.rotation.set(R,_,k),h&&(f.name=h),{tubeLineModel:f,tubeLineInfo:i}}function j0(p){let e=K0(p);return new Mt(e,!1,"centripetal",1)}function K0(p){let e=[];for(let t=0;t<p.length;t+=3)e.push(new U(p[t],p[t+1],p[t+2]));return e}function V0(p,e){const t=e.clone();return t.repeat.set(Math.ceil(p/.5),1),t.wrapS=J,t}const z0=["UNIT","TOWER","FREEZE","COOLANT"];class W0{constructor(){x(this,"deviceMap",{});x(this,"modelGroup");x(this,"closeMaterial");x(this,"warnMaterial");x(this,"typeCacheMaterial",{});x(this,"tubeLineMap",{});x(this,"showTipsMap",{});x(this,"tubeLineFlow",!0);x(this,"warnTexture");x(this,"warnSpriteMaterial");x(this,"greenPointMaterial");x(this,"selectableModels",[]);this.closeMaterial=new _t({transparent:!0,opacity:.85,color:new F("#a3a3a3"),depthTest:!0,depthWrite:!0,side:de,name:"closeMaterial"}),this.warnMaterial=this.closeMaterial.clone(),this.warnMaterial.color=new F("#FF3845"),this.warnMaterial.name="deviceWarnMaterial",this.warnMaterial.dir="toBig",ne({fun:({ctx:e,delta:t})=>{let s=e.opacity;s>=.85?(e.dir="toSmall",s=.85):s<=.4&&(e.dir="toBig",s=.4);let n=e.dir==="toBig"?s+t*.5:s-t*.5;e.opacity=n},args:[],key:"deviceWarnMaterial",content:this.warnMaterial}),this.modelGroup=new Y}fmtObject3d(e){return e.scene.traverse(t=>{const{type:s,no:n,tempId:a}=t.userData;if(s==="TUBE"){let i=this.replaceTubeWrapperMaterial(t.clone());this.modelGroup.add(i)}if(s)if(n||a){let i=this.formatDeviceModel(t.clone());this.selectableModels.push(i),this.modelGroup.add(i)}else this.modelGroup.add(t.clone())}),this.modelGroup}updateDevice(e){var r;const{no:t,attrMap:s}=e;let n=this.deviceMap[t];if(!n)return;n.type!=="PRESSURE"&&(n.isRunning=this.checkIsRunning(n.type,s),n.isWarning=this.checkIsWarning(s),this.toggleDeviceStatus(n));let a=Bt(n.type,n.name,s,n.textContent,n.no,t,n.isWarning),i=(r=this.modelGroup)==null?void 0:r.getObjectById(n.modelId);i&&(this.updatePointSprite(n,i),this.updateTextSprite(n,a,i))}loadTubeLine(e,t){e.forEach(s=>{var i;const{tubeLineModel:n,tubeLineInfo:a}=H0(s,t);this.tubeLineMap[s.name]=a,(i=this.modelGroup)==null||i.add(n),this.setTubeLineAni(a)}),t.dispose()}toggleShowTypeTips(e,t){this.showTipsMap[e]=t,Object.keys(this.deviceMap).forEach(s=>{const n=this.deviceMap[s];n.type===e&&(n.isShowTips=t,n.isShowPoint=t,this.toggleShowTextSprite(n))})}setTubeLineFlow(e){this.tubeLineFlow=e}isSelectAble(e){return!e.userData||!e.userData.type?!1:z0.includes(e.userData.type)}toggleDeviceSelect(e,t){const{no:s}=e.userData,n=this.deviceMap[s];n&&(n.isShowPoint=n.isShowTips?!0:t,this.updatePointSprite(n,e))}dispose(){Object.keys(this.typeCacheMaterial).forEach(e=>{this.typeCacheMaterial[e].forEach(t=>{t.dispose()}),delete this.typeCacheMaterial[e]}),this.tubeLineMap={},Object.keys(this.deviceMap).forEach(e=>{this.deviceMap[e].fanTween&&(this.deviceMap[e].fanTween.stop(),Ae(this.deviceMap[e].fanTween),this.deviceMap[e].fanTween=void 0,this.deviceMap[e].fanModeId=void 0)}),this.warnTexture&&(this.warnTexture.dispose(),this.warnTexture=void 0),this.warnSpriteMaterial&&(this.warnSpriteMaterial.dispose(),this.warnSpriteMaterial=void 0),this.greenPointMaterial&&(this.greenPointMaterial.dispose(),this.greenPointMaterial=void 0),this.closeMaterial&&(this.closeMaterial.dispose(),this.closeMaterial=void 0),this.warnMaterial&&(this.warnMaterial.dispose(),this.warnMaterial=void 0),this.selectableModels.splice(0),this.modelGroup&&(this.modelGroup.clear(),this.modelGroup=void 0)}replaceTubeWrapperMaterial(e){let t=e.material;return t.transparent=!0,t.side=Ft,t.depthTest=!0,t.depthWrite=!0,t.opacity=.4,e}formatDeviceModel(e){const{no:t,tempId:s,type:n}=e.userData;return this.deviceMap[t||s]={...e.userData,textContent:[],type:n,no:t,modelId:e.id,name:e.name,isRunning:!1,isWarning:!1,needWarning:n==="UNIT"||n==="TOWER"||n==="FREEZE",isShowTips:n==="PRESSURE",isShowPoint:n==="PRESSURE"},this.typeCacheMaterial[n]||(this.typeCacheMaterial[n]=[],e.traverse(a=>{a.type==="Mesh"&&a.material&&this.typeCacheMaterial[n].push(a.material)})),e}checkIsRunning(e,t){return t.runningstatus===void 0&&t.runningstatus1==null?!0:t.runningstatus==="1"||t.runningstatus1==="1"}checkIsWarning(e){return e.faultstatus===void 0?!1:e.faultstatus==="1"}toggleDeviceStatus(e){const{modelId:t,isRunning:s,type:n,tagIds:a,needWarning:i,isWarning:r}=e;let o=this.modelGroup.getObjectById(t);if(o){if(!s)o.traverse(c=>{c.type==="Mesh"&&c.material&&(c.material=r&&i?this.warnMaterial:this.closeMaterial)}),e.fanTween&&(e.fanTween.stop(),Ae(e.fanTween),e.fanTween=void 0);else{const c=this.typeCacheMaterial[n];let u=0,l;if(o.traverse(d=>{d.type==="Mesh"&&d.material&&(d.material=r&&i?this.warnMaterial:c[u++]),d.userData&&d.userData.towerFan&&(l=d)}),l){let d=new ee({rotationY:0});d.to({rotationY:360}).duration(1e5).repeat(1/0).onUpdate(({rotationY:f})=>{l.rotation.y=f}).start(),St(d),e.fanTween=d,e.fanModeId=l.id}}a&&this.toggleTubeLineFlow(e)}}toggleTubeLineFlow(e){const{no:t,isRunning:s,tagIds:n}=e;n&&n.length&&n.forEach(a=>{let i=this.tubeLineMap[a];i&&(s?i.deviceNos.push(t):i.deviceNos=i.deviceNos.filter(r=>r!==t),this.setTubeLineAni(i))})}setTubeLineAni(e){var u;const{isReverse:t,isActive:s,deviceNos:n,tagId:a,modelId:i}=e,r=s||n.length>0;let o=(u=this.modelGroup)==null?void 0:u.getObjectById(i);if(!o)return;let c=ye(a);if(r){if(o.visible=!0,c)return;ne({fun:({ctx:l,delta:d},f)=>{if(!this.tubeLineFlow)return;let m=l.material.map.offset.x,T=f?m+d*2:m-d*2;l.material.map.offset.x=T},content:o,args:[t],key:a})}else c&&be(a),o.visible=!1}updatePointSprite(e,t){var c;const{pointSpriteId:s,isShowPoint:n,isWarning:a,needWarning:i}=e;let r=a&&i;this.warnTexture||(this.warnTexture=new $().load("/demo/image/sprite-warn1.png")),this.warnSpriteMaterial||(this.warnSpriteMaterial=new Ee({map:this.warnTexture,transparent:!0,depthTest:!1,color:new F("#FF3845")})),this.greenPointMaterial||(this.greenPointMaterial=new Ee({map:this.warnTexture,transparent:!0,depthTest:!1,color:new F("#00E86E")}));let o;if(s?(o=this.modelGroup.getObjectById(s),o.material=r?this.warnSpriteMaterial:this.greenPointMaterial):(o=Gt(r?this.warnSpriteMaterial:this.greenPointMaterial,t),o.scale.set(.7,.7,1),(c=this.modelGroup)==null||c.add(o),e.pointSpriteId=o.id),o.visible=n,n){if(ye(e.pointSpriteId+"_point"))return;ne({fun:({ctx:l,delta:d})=>{if(!l.visible)return;let f=l.scale.x;f>=.7?(l.dir="toSmall",f=.7):f<=.2&&(l.dir="toBig",f=.2);let m=l.dir==="toBig"?f+d*.5:f-d*.5;l.scale.set(m,m,m)},args:[],content:o,key:e.pointSpriteId+"_point"})}else be(e.pointSpriteId+"_point")}updateTextSprite(e,t,s){var u;const{isWarning:n,needWarning:a,textSpriteId:i}=e,r=document.createElement("canvas"),c=Ut(r,t||[],n&&a?"#FF3845":"#00E86E");if(i){let l=this.modelGroup.getObjectById(i);if(!l)return;l.material.map=c,l.visible=e.isShowTips,l.scale.set(3.5,3.5,1)}else{const l=Ht(c,s,3.5);l.visible=e.isShowTips,e.textSpriteId=l.id,(u=this.modelGroup)==null||u.add(l)}}toggleShowTextSprite(e){var i;const{textSpriteId:t,isShowTips:s}=e;let n=(i=this.modelGroup)==null?void 0:i.getObjectById(e.modelId);if(!n||!t)return;let a=this.modelGroup.getObjectById(t);a.visible=s,this.updatePointSprite(e,n)}}class X0{constructor(e){x(this,"boxHelper");const t=e===void 0?65535:e;this.boxHelper=new Nt(new ue,new F(t))}setVisible(e){this.boxHelper.visible=e}attach(e){this.boxHelper.setFromObject(e),this.setVisible(!0)}dispose(){const e=this.boxHelper.parent;e!==null&&e.remove(this.boxHelper),Object.keys(this).forEach(t=>{this[t]=null})}}const q0=[{id:"62fb6a59f115653bada65ab1",no:"1628333768128",name:"1",attrMap:{faultstatus:"0",runningstatus:"0",temp_cold_set:"10.00"}},{id:"62fb6a59f115653bada65a9f",no:"1628333723647",name:"2",attrMap:{faultstatus:"0",runningstatus:"1",temp_cold_set:"10.00"}},{id:"62fb6a5af115653bada65aca",no:"1627622037578",name:"3",attrMap:{faultstatus:"0",runningstatus:"0",temp_cold_set:"10.00"}},{id:"62fb6a5af115653bada65ace",no:"1628215843959",name:"4",attrMap:{faultstatus:"0",runningstatus:"0",temp_cold_set:"11.00"}},{id:"62fb6a5af115653bada65adf",no:"1628173932761",name:"1",attrMap:{freqset:"40.00",runningstatus1:"0",faultstatus:"0",runningstatus:"1"}},{id:"62fb6a59f115653bada65aa5",no:"1628237377907",name:"2",attrMap:{runningstatus1:"0",runningstatus:"0"}},{id:"62fb6a59f115653bada65aaa",no:"1628233750175",name:"3",attrMap:{freqset:"40.00",runningstatus1:"0",faultstatus:"0",runningstatus:"0"}},{id:"62fb6a59f115653bada65a9b",no:"1628236018911",name:"4",attrMap:{freqset:"40.00",runningstatus1:"0",faultstatus:"0",runningstatus:"0"}},{id:"62fb6a59f115653bada65aba",no:"1628236031736",name:"5",attrMap:{freqset:"39.00",runningstatus1:"0",faultstatus:"1",runningstatus:"0"}},{id:"62fb6a5af115653bada65abe",no:"1628237787155",name:"6",attrMap:{freqset:"43.00",runningstatus1:"0",faultstatus:"1",runningstatus:"0"}},{id:"62fb6a59f115653bada65a95",no:"1628239003705",name:"1",attrMap:{freqset:"41.00",runningstatus1:"0",faultstatus:"0",runningstatus:"0"}},{id:"62fb6a5af115653bada65ad5",no:"1628239301464",name:"2",attrMap:{runningstatus1:"0",runningstatus:"0"}},{id:"62fb6a59f115653bada65ab6",no:"1628239138015",name:"3",attrMap:{runningstatus1:"0",runningstatus:"0"}},{id:"62fb6a59f115653bada65aae",no:"1628239158925",name:"4",attrMap:{freqset:"41.00",runningstatus1:"0",faultstatus:"0",runningstatus:"0"}},{id:"62fb6a5af115653bada65acd",no:"1628239352870",name:"5",attrMap:{runningstatus1:"0",faultstatus:"1",runningstatus:"0"}},{id:"62fb6a5af115653bada65acf",no:"1628239171765",name:"6",attrMap:{freqset:"41.00",runningstatus1:"0",faultstatus:"1",runningstatus:"0"}},{id:"62fb6a5af115653bada65ae4",no:"1628434513994",name:"1",attrMap:{runningstatus1:"0"}},{id:"62fb6a59f115653bada65aa3",no:"1628435412822",name:"2",attrMap:{runningstatus1:"0"}},{id:"62fb6a5af115653bada65ad1",no:"1628435468401",name:"3",attrMap:{runningstatus1:"0",faultstatus:"1",runningstatus:"1"}},{id:"62fb6a5af115653bada65acb",no:"1628435506714",name:"4",attrMap:{runningstatus1:"0",faultstatus:"1",runningstatus:"1"}},{id:"62fb6a5af115653bada65ac1",no:"1628435560524",name:"5",attrMap:{runningstatus1:"0",faultstatus:"0",runningstatus:"1"}},{id:"62fb6a59f115653bada65a9e",no:"1628319619115",name:"1",attrMap:{runningstatus:"0"}},{id:"62fb6a5af115653bada65ad4",no:"1628437260325",name:"1",attrMap:{runningstatus:"0"}},{id:"62fb6a59f115653bada65ab7",no:"1628469741539",name:"1",attrMap:{runningstatus:"0"}},{id:"62fb6a5af115653bada65ad6",no:"1628469589787",name:"1",attrMap:{runningstatus:"0"}},{id:"62fb6a5af115653bada65ae2",no:"1628319939635",name:"2",attrMap:{runningstatus:"1"}},{id:"62fb6a59f115653bada65a9d",no:"1628469197071",name:"2",attrMap:{runningstatus:"1"}},{id:"62fb6a5af115653bada65ad0",no:"1628469944740",name:"2",attrMap:{runningstatus:"1"}},{id:"62fb6a5af115653bada65ad3",no:"1628469841982",name:"2",attrMap:{runningstatus:"1"}},{id:"62fb6a5af115653bada65ad8",no:"1628320079627",name:"3",attrMap:{runningstatus:"1"}},{id:"62fb6a59f115653bada65ab0",no:"1628469344097",name:"3",attrMap:{faultstatus:"0",runningstatus:"1"}},{id:"62fb6a5af115653bada65ac2",no:"1628470116158",name:"3",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a59f115653bada65aac",no:"1628470179605",name:"3",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a5af115653bada65ae3",no:"1628320225786",name:"4",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a59f115653bada65aa4",no:"1628469443086",name:"4",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a59f115653bada65a99",no:"1628470243740",name:"4",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a5af115653bada65ac4",no:"1628470295924",name:"4",attrMap:{faultstatus:"1",runningstatus:"1"}},{id:"62fb6a5af115653bada65ad7",no:"1628470530715",name:"5",attrMap:{faultstatus:"1",runningstatus:"0"}},{id:"62fb6a59f115653bada65ab9",no:"1628470448673",name:"5",attrMap:{faultstatus:"1",runningstatus:"0"}},{id:"62fb6a5af115653bada65ae1",no:"1627619860268",name:"A1",attrMap:{temp:"19.56"}},{id:"62fb6a59f115653bada65a96",no:"1627619891453",name:"A2",attrMap:{temp:"19.67"}},{id:"62fb6a5af115653bada65adc",no:"1627619312658",name:"",attrMap:{temp:"19.60"}},{id:"62fb6a59f115653bada65aa8",no:"1627825972575",name:"",attrMap:{temp:"18.99"}},{id:"62fb6a5af115653bada65ac9",no:"1627619333867",name:"",attrMap:{temp:"20.45"}},{id:"62fb6a5af115653bada65adb",no:"1627619882213",name:"",attrMap:{temp:"19.54"}},{id:"62fb6a59f115653bada65aab",no:"1627619665021",name:"2",attrMap:{pressure:"899.94"}},{id:"62fb6a59f115653bada65a97",no:"1627619679939",name:"2",attrMap:{pressure:"890.38"}},{id:"62fb6a59f115653bada65a9a",no:"1627619589431",name:"",attrMap:{pressure:"1044.95"}}],Y0=[{name:"line-001",position:[2.5139989852905273,.6459704637527466,1.9535276889801025],rotation:[0,0,-0],scale:[1,1,1],points:[-.20303058624267578,0,-.7454776763916016,.0030307769775390625,0,-.7454776763916016,.0648336410522461,0,-.7356891632080078,.12058734893798828,0,-.7072811126708984,.16483402252197266,0,-.6630349159240723,.19324207305908203,0,-.6072812080383301,.20303058624267578,0,-.5454778671264648,.20303010940551758,0,.7454776763916016],userData:{type:"LINE",color:"#26FF51",tagId:"line-001",isReverse:!0}},{name:"line-002",position:[2.1609227657318115,.9048327207565308,4.151027679443359],rotation:[0,0,-0],scale:[1,1,1],points:[.20092374086380005,.2572265863418579,-.8374664783477783,.2009236216545105,.25552886724472046,.637466549873352,.20092368125915527,.24566030502319336,.6992698907852173,.2009236216545105,.21718040108680725,.7550235390663147,.20092356204986572,.17287689447402954,.7992698550224304,.20092350244522095,.11708652973175049,.8276777267456055,.20092332363128662,.055270496755838394,.8374664783477783,.2009231448173523,-.05722677335143089,.8374664783477783,.19113463163375854,-.11903011798858643,.8374664783477783,.16272658109664917,-.1747838258743286,.8374664783477783,.1184808611869812,-.21903002262115479,.8374664783477783,.06272715330123901,-.24743807315826416,.8374664783477783,.0009233355522155762,-.2572265863418579,.8374664783477783,-.20092374086380005,-.2572265863418579,.8374664783477783],userData:{type:"LINE",color:"#589DFF",tagId:"line-002",isReverse:!0}},{name:"line-003",position:[2.1609230041503906,.8678137063980103,-3.4039835929870605],rotation:[0,0,-0],scale:[1,1,1],points:[-.20092391967773438,-.23223111033439636,-.5655117630958557,.0009241104125976562,-.23223111033439636,-.5655117630958557,.06272697448730469,-.22244301438331604,-.5655117630958557,.11848068237304688,-.1940346360206604,-.5655117630958557,.16272735595703125,-.14978837966918945,-.5655117630958557,.19113540649414062,-.09403467923402786,-.5655117630958557,.20092391967773438,-.032231517136096954,-.5655117630958557,.20092380046844482,.09620177745819092,-.5655117630958557,.20092374086380005,.15799254179000854,-.5557230114936829,.20092374086380005,.21370947360992432,-.5273151993751526,.20092368125915527,.2578986883163452,-.4830690324306488,.20092368125915527,.2862345576286316,-.4273153245449066,.20092368125915527,.29594337940216064,-.3655119836330414,.20092356204986572,.2942456603050232,.5655117630958557],userData:{type:"LINE",color:"#589DFF",tagId:"line-003"}},{name:"line-004",position:[2.516233205795288,.6459704637527466,-3.7599740028381348],rotation:[0,0,-0],scale:[1,1,1],points:[-.20079636573791504,0,-.935044527053833,.0007965564727783203,0,-.935044527053833,.06259942054748535,0,-.9252560138702393,.11835312843322754,0,-.8968479633331299,.16259980201721191,0,-.8526017665863037,.1910078525543213,0,-.7968480587005615,.20079636573791504,0,-.7350447177886963,.20079588890075684,0,.935044527053833],userData:{type:"LINE",color:"#26FF51",tagId:"line-004",isReverse:!0}},{name:"line-005",position:[2.8745057582855225,1.1620593070983887,-2.5277771949768066],rotation:[0,0,-0],scale:[1,1,1],points:[-.17308884859085083,38433445002284035e-33,38433441693561584e-33,.17308884859085083,-38433445002284035e-33,-38433441693561584e-33],userData:{type:"LINE",color:"#589DFF",tagId:"line-005"}},{name:"line-006",position:[5.723812580108643,1.3985295295715332,-4.161771774291992],rotation:[0,0,-0],scale:[1,1,1],points:[-2.3373146057128906,-.23647013306617737,1.3102881908416748,-2.3373146057128906,-.23647014796733856,-1.2102878093719482,-2.3324203491210938,-.23647014796733856,-1.24118971824646,-2.318216323852539,-.23647014796733856,-1.269066572189331,-2.296092987060547,-.23647016286849976,-1.2911899089813232,-2.268216133117676,-.23647016286849976,-1.305393934249878,-2.237314224243164,-.23647016286849976,-1.3102881908416748,2.2373147010803223,-.23647016286849976,-1.3102881908416748,2.268216133117676,-.23157578706741333,-1.3102881908416748,2.2960925102233887,-.2173718810081482,-1.3102881908416748,2.318215847015381,-.19524866342544556,-1.3102881908416748,2.3324198722839355,-.16737186908721924,-1.3102881908416748,2.3373146057128906,-.13647013902664185,-1.3102881908416748,2.3373146057128906,.20184099674224854,-1.3102881908416748,2.3373146057128906,.2327427864074707,-1.305393934249878,2.3373146057128906,.2606196999549866,-1.2911899089813232,2.3373146057128906,.28274279832839966,-1.269066572189331,2.3373146057128906,.29694682359695435,-1.24118971824646,2.3373146057128906,.3018410801887512,-1.2102878093719482,2.3373146057128906,.3018409013748169,-.2482488453388214,2.3373146057128906,.2969464063644409,-.2173469364643097,2.3373146057128906,.2827426791191101,-.1894700676202774,2.3373146057128906,.2606193423271179,-.16734673082828522,2.3373146057128906,.2327425181865692,-.15314270555973053,2.3373146057128906,.20184096693992615,-.14824844896793365,2.3373146057128906,-.3018410801887512,-.14824840426445007],userData:{type:"LINE",color:"#589DFF",tagId:"line-006"}},{name:"line-007",position:[4.13732385635376,1.1253948211669922,-2.519737958908081],rotation:[0,0,-0],scale:[1,1,1],points:[-1.0735549926757812,-.47942429780960083,-23409114646710805e-24,-.26544255018234253,-.47942429780960083,-23409114646710805e-24,-.23454099893569946,-.4745299220085144,-23778632396442845e-24,-.20666414499282837,-.46032601594924927,-24850997704106703e-24,-.18454092741012573,-.43820279836654663,-26521249196775898e-24,-.1703370213508606,-.4103260040283203,-2862589099095203e-23,-.16544252634048462,-.3794242739677429,-30958908325828816e-24,-.16544252634048462,.3794242739677429,30958908325828816e-24,-.1605481505393982,.4103260636329651,2862588743823835e-23,-.14634424448013306,.4382029175758362,2652124564406222e-23,-.12422102689743042,.4603261351585388,24850987045965667e-24,-.09634417295455933,.47453004121780396,2377862173830181e-23,-.06544250249862671,.47942429780960083,23409118199424483e-24,1.0735549926757812,.47942429780960083,23409118199424483e-24],userData:{type:"LINE",color:"#26FF51",tagId:"line-007",isReverse:!0}},{name:"line-008",position:[4.129952430725098,1.1253948211669922,2.99881911277771],rotation:[0,0,-0],scale:[1,1,1],points:[-1.0800338983535767,-.47942429780960083,-23409114646710805e-24,-.2580709457397461,-.47942429780960083,-23409114646710805e-24,-.22716915607452393,-.4745299220085144,-23778632396442845e-24,-.19929230213165283,-.46032601594924927,-24850997704106703e-24,-.1771690845489502,-.43820279836654663,-26521249196775898e-24,-.16296517848968506,-.4103260040283203,-2862589099095203e-23,-.15807092189788818,-.3794242739677429,-30958908325828816e-24,-.15807092189788818,.3794242739677429,30958908325828816e-24,-.15317654609680176,.4103260636329651,2862588743823835e-23,-.13897264003753662,.4382029175758362,2652124564406222e-23,-.11684954166412354,.4603261351585388,24850987045965667e-24,-.08897268772125244,.47453004121780396,2377862173830181e-23,-.058071017265319824,.47942429780960083,23409118199424483e-24,1.0800338983535767,.47942429780960083,23409118199424483e-24],userData:{type:"LINE",color:"#26FF51",tagId:"line-008",isReverse:!0}},{name:"line-009",position:[6.168935298919678,.4455268681049347,-3.622358560562134],rotation:[0,0,-0],scale:[1,1,1],points:[-.37851524353027344,0,-.762352466583252,.17851543426513672,0,-.762352466583252,.24031829833984375,0,-.7525639533996582,.29607200622558594,0,-.7241559028625488,.3403186798095703,0,-.6799097061157227,.3687267303466797,0,-.6241559982299805,.37851524353027344,0,-.5623526573181152,.37851476669311523,0,.762352466583252],userData:{type:"LINE",color:"#26FF51",tagId:"line-009",flowDirection:"in",isReverse:!0}},{name:"line-010",position:[5.997025489807129,.4455268681049347,-2.515836000442505],rotation:[0,0,-0],scale:[1,1,1],points:[-.20560026168823242,0,-0,.20560026168823242,0,-0],userData:{type:"LINE",color:"#26FF51",tagId:"line-010"}},{name:"line-011",position:[6.168935298919678,.4455268979072571,4.076535224914551],rotation:[0,0,-0],scale:[1,1,1],points:[.37851500511169434,-14901161193847656e-24,-.7602357864379883,.37851452827453613,-14901161193847656e-24,.5602359771728516,.3687260150909424,-14901161193847656e-24,.6220393180847168,.340317964553833,-14901161193847656e-24,.677793025970459,.29607224464416504,-14901161193847656e-24,.7220392227172852,.24031853675842285,-14901161193847656e-24,.7504472732543945,.17851471900939941,-14901161193847656e-24,.7602357864379883,-.37851500511169434,14901161193847656e-24,.7602357864379883],userData:{type:"LINE",color:"#26FF51",tagId:"line-011"}},{name:"line-012",position:[5.567304611206055,1.226304292678833,-3.6311745643615723],rotation:[0,0,-0],scale:[1,1,1],points:[-7095536602719221e-24,-.37851524353027344,-.7535369396209717,10136233186130994e-23,.17851543426513672,-.7535369396209717,11208061323486618e-23,.24031829833984375,-.7437484264373779,11911939168385288e-23,.29607200622558594,-.7153403759002686,12178968233911291e-23,.3403186798095703,-.6710941791534424,11982993441961298e-23,.3687267303466797,-.6153404712677002,11343199446400831e-23,.37851524353027344,-.553537130355835,-12178968233911291e-23,.37851476669311523,.7535369396209717],userData:{type:"LINE",color:"#26FF51",tagId:"line-012",flowDirection:"in"}},{name:"line-013",position:[5.5673041343688965,1.0599195957183838,-2.515836000442505],rotation:[0,0,-0],scale:[1,1,1],points:[-6778288508257901e-23,-.19506502151489258,-4004205109576619e-30,6778288508257901e-23,.19506502151489258,4004205109576619e-30],userData:{type:"LINE",color:"#26FF51",tagId:"line-013",flowDirection:"in"}},{name:"line-014",position:[5.56730318069458,1.2263033390045166,4.070808410644531],rotation:[0,0,-0],scale:[1,1,1],points:[2064157484937823e-22,.37851500511169434,-.7659626007080078,-23426025563821895e-25,.37851452827453613,.5659627914428711,-12552320072245493e-24,.3687260150909424,.6277661323547363,-25574571793640644e-24,.340317964553833,.6835198402404785,-4013440246808386e-23,.29607224464416504,.7277660369873047,-54806925220418634e-24,.24031853675842285,.7561740875244141,-6815574238316913e-23,.17851471900939941,.7659626007080078,-2064157484937823e-22,-.37851500511169434,.7659626007080078],userData:{type:"LINE",color:"#26FF51",tagId:"line-014",isReverse:!0}},{name:"line-015",position:[5.56730318069458,1.0625457763671875,3.0057637691497803],rotation:[0,0,-0],scale:[1,1,1],points:[6829435506006121e-23,.1976919174194336,4004205109576619e-30,-6829435506006121e-23,-.1976919174194336,-4004205109576619e-30],userData:{type:"LINE",color:"#26FF51",tagId:"line-015",isReverse:!0}},{name:"line-016",position:[6.547450065612793,.4455268681049347,.21088027954101562],rotation:[0,0,-0],scale:[1,1,1],points:[-2793288444991049e-23,0,-.5871917009353638,2793288444991049e-23,0,.5871917009353638],userData:{type:"LINE",color:"#26FF51",tagId:"line-016",flowDirection:"in",isReverse:!0}},{name:"line-017",position:[7.479097843170166,1.048953652381897,1.5854299068450928],rotation:[0,0,-0],scale:[1,1,1],points:[-.5903153419494629,-.6034268140792847,-.43759867548942566,.4903254508972168,-.6034268140792847,-.4045109450817108,.5212235450744629,-.5985324382781982,-.4040627181529999,.5490975379943848,-.5843285322189331,-.4036593437194824,.5712180137634277,-.5622053146362305,-.40333986282348633,.5854201316833496,-.5343284606933594,-.4031338691711426,.5903153419494629,-.5034267902374268,-.4030642509460449,.5903153419494629,.5034267902374268,-.4030643105506897,.5903153419494629,.5343285799026489,-.3981700539588928,.5903153419494629,.5622053146362305,-.38396602869033813,.5903153419494629,.5843285322189331,-.36184269189834595,.5903153419494629,.5985324382781982,-.33396586775779724,.5903153419494629,.6034268140792847,-.3030639588832855,.5903153419494629,.6034268140792847,.3375982344150543,.5903153419494629,.5985323190689087,.36850014328956604,.5903153419494629,.5843284130096436,.3963770270347595,.5903153419494629,.5622053146362305,.4185003638267517,.5903153419494629,.5343284606933594,.4327043890953064,.5903153419494629,.5034267902374268,.43759864568710327,.5903153419494629,.046910736709833145,.43759867548942566],userData:{type:"LINE",color:"#26FF51",tagId:"line-017",isReverse:!0}},{name:"line-018",position:[-1.6579922437667847,.6459704637527466,1.9570341110229492],rotation:[0,0,-0],scale:[-1,1,1],points:[-.1835322380065918,0,-.7750973701477051,-.016467571258544922,0,-.7750973701477051,.04533529281616211,0,-.7653088569641113,.1010890007019043,0,-.736900806427002,.14533567428588867,0,-.6926546096801758,.17374372482299805,0,-.6369009017944336,.1835322380065918,0,-.5750975608825684,.1835317611694336,0,.7750973701477051],userData:{type:"LINE",color:"#FFBA10",tagId:"line-018",isReverse:!0}},{name:"line-019",position:[-1.285417914390564,.9048327207565308,4.178171157836914],rotation:[0,0,-0],scale:[-1,1,1],points:[.20092374086380005,.2572265863418579,-.7866073846817017,.2009236216545105,.25552883744239807,.5866074562072754,.20092368125915527,.24566029012203217,.6484107971191406,.2009236216545105,.21718040108680725,.7041643857955933,.20092356204986572,.17287689447402954,.748410701751709,.20092350244522095,.11708652973175049,.7768186330795288,.20092332363128662,.055270493030548096,.7866073250770569,.2009231448173523,-.05722677707672119,.7866073846817017,.19113463163375854,-.11903011798858643,.7866073846817017,.16272658109664917,-.1747838258743286,.7866073846817017,.1184808611869812,-.21903002262115479,.7866073846817017,.06272715330123901,-.24743807315826416,.7866073846817017,.0009233355522155762,-.2572265863418579,.7866073846817017,-.20092374086380005,-.2572265863418579,.7866073846817017],userData:{type:"LINE",color:"#FF9339",tagId:"line-019",isReverse:!0}},{name:"line-020",position:[-1.6559613943099976,.6459704637527466,-3.7313528060913086],rotation:[0,0,-0],scale:[-1,1,1],points:[-.1855630874633789,0,-.9636662006378174,-.014436721801757812,0,-.9636662006378174,.04736614227294922,0,-.9538776874542236,.1031198501586914,0,-.9254696369171143,.14736652374267578,0,-.8812234401702881,.17577457427978516,0,-.8254697322845459,.1855630874633789,0,-.7636663913726807,.1855626106262207,0,.9636662006378174],userData:{type:"LINE",color:"#FFBA10",tagId:"line-020",isReverse:!0}},{name:"line-021",position:[-1.285417914390564,.9048327207565308,-1.5237292051315308],rotation:[0,0,-0],scale:[-1,1,1],points:[.20092374086380005,.2572265863418579,-.5826352834701538,.2009236216545105,.25552886724472046,.382635235786438,.20092368125915527,.24566030502319336,.4444385766983032,.2009236216545105,.21718041598796844,.5001922845840454,.20092356204986572,.17287690937519073,.5444386005401611,.20092350244522095,.11708654463291168,.5728464126586914,.20092332363128662,.05527050793170929,.5826351642608643,.2009231448173523,-.05722676217556,.5826351642608643,.19113463163375854,-.11903010308742523,.5826351642608643,.16272658109664917,-.17478381097316742,.5826351642608643,.1184808611869812,-.2190300077199936,.5826351642608643,.06272715330123901,-.24743805825710297,.5826351642608643,.0009233355522155762,-.2572265863418579,.5826351642608643,-.20092374086380005,-.2572265863418579,.5826352834701538],userData:{type:"LINE",color:"#FF9339",tagId:"line-021",isReverse:!0}},{name:"line-022",position:[-2.044590711593628,1.1620593070983887,-2.455294609069824],rotation:[0,0,-0],scale:[-1,1,1],points:[-.21503543853759766,47747458994961724e-33,47747455686239273e-33,.21503543853759766,-47747458994961724e-33,-47747455686239273e-33],userData:{type:"LINE",color:"#FF9339",tagId:"line-022"}},{name:"line-023",position:[-3.2765746116638184,1.1253948211669922,3.036280870437622],rotation:[0,0,-0],scale:[-1,1,1],points:[-1.0880753993988037,-.47942429780960083,-23409114646710805e-24,-.28019803762435913,-.47942429780960083,-23409114646710805e-24,-.24929624795913696,-.4745299220085144,-23778632396442845e-24,-.22141939401626587,-.46032601594924927,-24850997704106703e-24,-.19929617643356323,-.43820279836654663,-26521249196775898e-24,-.1850922703742981,-.4103260040283203,-2862589099095203e-23,-.18019801378250122,-.3794242739677429,-30958908325828816e-24,-.18019801378250122,.3794242739677429,30958908325828816e-24,-.1753036379814148,.4103260636329651,2862588743823835e-23,-.16109973192214966,.4382029175758362,2652124564406222e-23,-.13897663354873657,.4603261351585388,24850987045965667e-24,-.11109977960586548,.47453004121780396,2377862173830181e-23,-.08019810914993286,.47942429780960083,23409118199424483e-24,1.0880753993988037,.47942429780960083,23409118199424483e-24],userData:{type:"LINE",color:"#FFBA10",tagId:"line-023",isReverse:!0}},{name:"line-024",position:[-5.277711868286133,.4455268681049347,-3.6060738563537598],rotation:[0,0,-0],scale:[-1,1,1],points:[-.37851524353027344,0,-.778637170791626,.17851543426513672,0,-.778637170791626,.24031829833984375,0,-.7688486576080322,.29607200622558594,0,-.7404406070709229,.3403186798095703,0,-.6961944103240967,.3687267303466797,0,-.6404407024383545,.37851524353027344,0,-.5786373615264893,.37851476669311523,0,.778637170791626],userData:{type:"LINE",color:"#FFBA10",tagId:"line-024",isReverse:!0}},{name:"line-025",position:[-5.114017009735107,.4455268681049347,-2.515836000442505],rotation:[0,0,-0],scale:[-1,1,1],points:[-.1977550983428955,0,-0,.1977550983428955,0,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-025",isReverse:!0}},{name:"line-026",position:[-5.656226634979248,.4455268681049347,2.078172445297241],rotation:[0,0,-0],scale:[-1,1,1],points:[2384185791015625e-22,0,-.6238225698471069,-2384185791015625e-22,0,.6238225698471069],userData:{type:"LINE",color:"#FFBA10",tagId:"line-026",isReverse:!0}},{name:"line-027",position:[-5.109936237335205,.4455268681049347,3.0057637691497803],rotation:[0,0,-0],scale:[-1,1,1],points:[-.19367384910583496,0,-0,.19367384910583496,0,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-027",isReverse:!0}},{name:"line-028",position:[-4.7041916847229,1.226304292678833,-3.594005584716797],rotation:[0,0,-0],scale:[1,1,1],points:[-17002722785264268e-24,-.37851524353027344,-.7907059192657471,9145514923147857e-23,.17851543426513672,-.7907059192657471,10217344481588952e-23,.24031829833984375,-.7809174060821533,10921222326487623e-23,.29607200622558594,-.752509355545044,11188249970928155e-23,.3403186798095703,-.7082631587982178,1099227375789269e-22,.3687267303466797,-.6525094509124756,10352481183417694e-23,.37851524353027344,-.5907061100006104,-11188249970928155e-23,.37851476669311523,.7907059192657471],userData:{type:"LINE",color:"#FFBA10",tagId:"line-028"}},{name:"line-029",position:[-4.704192161560059,1.2348368167877197,-2.515836000442505],rotation:[0,0,-0],scale:[1,1,1],points:[-7203819762935382e-23,-.3699822425842285,-0,7203819762935382e-23,.3699822425842285,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-029"}},{name:"line-030",position:[-4.704192638397217,1.2263035774230957,1.9019451141357422],rotation:[0,0,-0],scale:[1,1,1],points:[-18135430934762553e-24,-.37851524353027344,-.7822754383087158,9032245174012132e-23,.17851543426513672,-.7822754383087158,10104073311367756e-23,.24031829833984375,-.7724869251251221,10807951156266427e-23,.29607200622558594,-.7440788745880127,11074978800706958e-23,.3403186798095703,-.6998326778411865,10879002587671494e-23,.3687267303466797,-.6440789699554443,10239210013196498e-23,.37851524353027344,-.5822756290435791,-11074978800706958e-23,.37851476669311523,.7822754383087158],userData:{type:"LINE",color:"#FFBA10",tagId:"line-030"}},{name:"line-031",position:[-4.704193115234375,1.2348361015319824,3.0057637691497803],rotation:[0,0,-0],scale:[1,1,1],points:[-7203819762935382e-23,-.3699822425842285,-0,7203819762935382e-23,.3699822425842285,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-031"}},{name:"line-032",position:[-5.6464385986328125,.4455268681049347,.24454045295715332],rotation:[0,0,-0],scale:[-1,1,1],points:[-2793288444991049e-23,0,-.5611342787742615,2793288444991049e-23,0,.5611342787742615],userData:{type:"LINE",color:"#FFBA10",tagId:"line-032",isReverse:!0}},{name:"line-033",position:[-6.375065326690674,.35539382696151733,4.712734222412109],rotation:[0,0,-0],scale:[-1,1,1],points:[-242926390114917e-23,0,-1.019035816192627,242926390114917e-23,0,1.019035816192627],userData:{type:"LINE",color:"#FFBA10",tagId:"line-033"}},{name:"line-034",position:[-6.6661152839660645,1.1811575889587402,-3.933070421218872],rotation:[0,0,-0],scale:[-1,1,1],points:[1876527733202238e-23,0,1.038041114807129,-1876527733202238e-23,0,-1.038041114807129],userData:{type:"LINE",color:"#FF9339",tagId:"line-034",isReverse:!0}},{name:"line-035",position:[-7.32671594619751,.35653918981552124,3.380913019180298],rotation:[0,0,-0],scale:[-1,1,1],points:[.6218388080596924,0,-46947523202334196e-24,-.6218388080596924,0,46947523202334196e-24],userData:{type:"LINE",color:"#FFBA10",tagId:"line-035"}},{name:"line-036",position:[-2.2283742427825928,1.1620593070983887,.46484124660491943],rotation:[0,0,-0],scale:[-1,1,1],points:[-.38157981634140015,15488502924654313e-24,2.5736136436462402,.28157979249954224,15488502924654313e-24,2.5736136436462402,.3124815821647644,1511899228034963e-23,2.5687193870544434,.3403584361076355,14046626972685772e-24,2.5545153617858887,.36248165369033813,12376354163734504e-24,2.5323920249938965,.37668555974960327,10271712369558372e-24,2.5045151710510254,.38157981634140015,793871635096366e-23,2.473613739013672,.38157981634140015,-15488502924654313e-24,-2.5736136436462402],userData:{type:"LINE",color:"#FF9339",tagId:"line-036"}},{name:"line-037",position:[-7.323559761047363,.35653918981552124,.45342469215393066],rotation:[0,0,-0],scale:[-1,1,1],points:[.6186825037002563,0,-4670923203775601e-23,-.6186825037002563,0,4670923203775601e-23],userData:{type:"LINE",color:"#FFBA10",tagId:"line-037"}},{name:"line-038",position:[-7.320316314697266,.35653918981552124,-2.260287046432495],rotation:[0,0,-0],scale:[-1,1,1],points:[.6154389381408691,0,-4646434703658997e-23,-.6154389381408691,0,4646434703658997e-23],userData:{type:"LINE",color:"#FFBA10",tagId:"line-038"}},{name:"line-039",position:[-7.3009352684021,.5951685905456543,-2.5767343044281006],rotation:[0,0,-0],scale:[-1,1,1],points:[.6348199248313904,-.23862938582897186,-47927571245054423e-24,-.5348199009895325,-.23862938582897186,4037777756593641e-23,-.5657215714454651,-.23373503983020782,4271079134809952e-23,-.5935984253883362,-.2195310890674591,4481543314227565e-23,-.6157216429710388,-.19740790128707886,46485691740372204e-24,-.629925549030304,-.16953107714653015,4755805704803606e-23,-.6348199248313904,-.13862937688827515,47927571245054423e-24,-.6348199248313904,.23862938582897186,47927571245054423e-24],userData:{type:"LINE",color:"#FF9339",tagId:"line-039",isReverse:!0}},{name:"line-040",position:[-7.304178714752197,.5951685905456543,.12688851356506348],rotation:[0,0,-0],scale:[-1,1,1],points:[.638063371181488,-.23862938582897186,-48172445588079427e-24,-.5380633473396301,-.23862938582897186,40622651908961416e-24,-.5689650177955627,-.23373503983020782,42955662138410844e-24,-.5968418717384338,-.2195310890674591,45060307485300655e-24,-.6189650893211365,-.19740790128707886,4673056253068353e-23,-.6331689953804016,-.16953107714653015,47802927838347387e-24,-.638063371181488,-.13862937688827515,48172445588079427e-24,-.638063371181488,.23862938582897186,48172445588079427e-24],userData:{type:"LINE",color:"#FF9339",tagId:"line-040",isReverse:!0}},{name:"line-041",position:[-7.307334899902344,.5951685905456543,3.0637686252593994],rotation:[0,0,-0],scale:[-1,1,1],points:[.6412195563316345,-.23862938582897186,-48410733199943934e-24,-.5412195324897766,-.23862938582897186,4086093952082592e-23,-.5721212029457092,-.23373503983020782,4319394975027535e-23,-.5999980568885803,-.2195310890674591,4529859154445148e-23,-.622121274471283,-.19740790128707886,46968850142548035e-24,-.6363251805305481,-.16953107714653015,48041215450211894e-24,-.6412195563316345,-.13862937688827515,48410733199943934e-24,-.6412195563316345,.23862938582897186,48410733199943934e-24],userData:{type:"LINE",color:"#FF9339",tagId:"line-041",isReverse:!0}},{name:"line-042",position:[8.462522506713867,1.413859486579895,2.558821439743042],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#26FF51",tagId:"line-042",running:!0}},{name:"line-043",position:[8.462522506713867,1.4140052795410156,3.165400266647339],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#26FF51",tagId:"line-043",running:!0}},{name:"line-044",position:[8.462522506713867,1.4140052795410156,3.775071859359741],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#26FF51",tagId:"line-044",running:!0}},{name:"line-045",position:[8.462522506713867,1.4130845069885254,4.378876686096191],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#26FF51",tagId:"line-045",running:!0}},{name:"line-047",position:[8.462522506713867,1.410554051399231,-1.3547126054763794],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#589DFF",tagId:"line-047",running:!0,isReverse:!0}},{name:"line-048",position:[8.462522506713867,1.4102166891098022,-1.9568761587142944],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#589DFF",tagId:"line-048",running:!0,isReverse:!0}},{name:"line-049",position:[8.462522506713867,1.414212703704834,-2.5618536472320557],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#589DFF",tagId:"line-049",running:!0,isReverse:!0}},{name:"line-050",position:[8.462522506713867,1.4129117727279663,-3.1710519790649414],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#589DFF",tagId:"line-050",running:!0,isReverse:!0}},{name:"line-051",position:[8.462522506713867,1.4135501384735107,-3.7774362564086914],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#589DFF",tagId:"line-051",running:!0,isReverse:!0}},{name:"line-052",position:[5.567303657531738,1.2263035774230957,1.9154930114746094],rotation:[0,0,-0],scale:[1,1,1],points:[-21098859548374094e-24,-.37851524353027344,-.7602193355560303,8735901246836875e-23,.17851543426513672,-.7602193355560303,9807729384192498e-23,.24031829833984375,-.7504308223724365,10511607229091169e-23,.29607200622558594,-.7220227718353271,107786348735317e-21,.3403186798095703,-.677776575088501,10582660081581707e-23,.3687267303466797,-.6220228672027588,9942867507106712e-23,.37851524353027344,-.5602195262908936,-107786348735317e-21,.37851476669311523,.7602193355560303,-107786348735317e-21,.37851476669311523,.7602193355560303],userData:{type:"LINE",color:"#26FF51",tagId:"line-052",flowDirection:"in"}},{name:"line-053",position:[5.991359710693359,.4455268681049347,1.1431779861450195],rotation:[0,0,-0],scale:[1,1,1],points:[-.20093965530395508,0,-0,.20093965530395508,0,-0],userData:{type:"LINE",color:"#26FF51",tagId:"line-053",isReverse:!0}},{name:"line-054",position:[5.994489669799805,.4455268979072571,2.996690034866333],rotation:[0,0,-0],scale:[1,1,1],points:[.2040696144104004,-14901161193847656e-24,-0,-.2040696144104004,14901161193847656e-24,-0],userData:{type:"LINE",color:"#26FF51",tagId:"line-054"}},{name:"line-055",position:[6.547449588775635,.4455268681049347,2.0606529712677],rotation:[0,0,-0],scale:[1,1,1],points:[2384185791015625e-22,0,-.5920634269714355,-2384185791015625e-22,0,.5920634269714355],userData:{type:"LINE",color:"#26FF51",tagId:"line-055"}},{name:"line-056",position:[5.990072250366211,.4455268979072571,-.6676099300384521],rotation:[0,0,-0],scale:[1,1,1],points:[.19965219497680664,-14901161193847656e-24,-0,-.19965219497680664,14901161193847656e-24,-0],userData:{type:"LINE",color:"#26FF51",tagId:"line-056",flowDirection:"in"}},{name:"line-057",position:[6.547449588775635,.4455268681049347,-1.624889612197876],rotation:[0,0,-0],scale:[1,1,1],points:[2384185791015625e-22,0,-.6086721420288086,2384185791015625e-22,0,-.6086721420288086,-2384185791015625e-22,0,.6086721420288086],userData:{type:"LINE",color:"#26FF51",tagId:"line-057",flowDirection:"in",isReverse:!0}},{name:"line-058",position:[5.5673041343688965,1.226304054260254,-1.4416308403015137],rotation:[0,0,-0],scale:[1,1,1],points:[20749840246025997e-23,.37851500511169434,-.7740204334259033,20749840246025997e-23,.37851500511169434,-.7740204334259033,-34252352065777814e-25,.37851452827453613,.5740206241607666,-13634959827868443e-24,.3687260150909424,.6358239650726318,-26657211549263593e-24,.340317964553833,.691577672958374,-41217035118279455e-24,.29607224464416504,.7358238697052002,-55889557870614226e-24,.24031853675842285,.7642319202423096,-6923838213879208e-23,.17851471900939941,.7740204334259033,-20749840246025997e-23,-.37851500511169434,.7740204334259033],userData:{type:"LINE",color:"#26FF51",tagId:"line-058",flowDirection:"in",isReverse:!0}},{name:"line-059",position:[2.5187222957611084,.6459704637527466,-1.944046974182129],rotation:[0,0,-0],scale:[1,1,1],points:[.19830679893493652,-14901161193847656e-24,-.23093914985656738,.19830632209777832,-14901161193847656e-24,.030939340591430664,.18851780891418457,-14901161193847656e-24,.0927426815032959,.1601097583770752,-14901161193847656e-24,.14849638938903809,.11586403846740723,-14901161193847656e-24,.19274258613586426,.06011033058166504,-14901161193847656e-24,.22115063667297363,-.0016934871673583984,-14901161193847656e-24,.23093914985656738,-.19830679893493652,14901161193847656e-24,.23093914985656738],userData:{type:"LINE",color:"#26FF51",tagId:"line-059"}},{name:"line-060",position:[2.1609227657318115,.9048327207565308,-1.5559722185134888],rotation:[0,0,-0],scale:[1,1,1],points:[.20092374086380005,.2572265863418579,-.6148782968521118,.2009236216545105,.25552883744239807,.414878249168396,.20092368125915527,.24566027522087097,.47668159008026123,.2009236216545105,.21718038618564606,.5324352979660034,.20092356204986572,.17287687957286835,.5766816139221191,.20092350244522095,.1170865148305893,.6050894260406494,.20092332363128662,.0552704781293869,.6148781776428223,.2009231448173523,-.057226791977882385,.6148781776428223,.19113463163375854,-.11903013288974762,.6148781776428223,.16272658109664917,-.1747838407754898,.6148781776428223,.1184808611869812,-.21903003752231598,.6148781776428223,.06272715330123901,-.24743808805942535,.6148781776428223,.0009233355522155762,-.2572265863418579,.6148781776428223,-.20092374086380005,-.2572265863418579,.6148782968521118],userData:{type:"LINE",color:"#589DFF",tagId:"line-060",isReverse:!0}},{name:"line-061",position:[2.1609230041503906,.8657733201980591,2.327700138092041],rotation:[0,0,-0],scale:[1,1,1],points:[-.20092391967773438,-.21781744062900543,-.3676068186759949,.0009241104125976562,-.21781744062900543,-.3676068186759949,.06272697448730469,-.2080293446779251,-.3676068186759949,.11848068237304688,-.17962099611759186,-.3676068186759949,.16272735595703125,-.13537472486495972,-.3676068186759949,.19113540649414062,-.07962101697921753,-.36760687828063965,.20092391967773438,-.01781785488128662,-.36760687828063965,.20092380046844482,.09620177745819092,-.36760687828063965,.20092374086380005,.15799254179000854,-.3578181266784668,.20092374086380005,.21370947360992432,-.3294103145599365,.20092368125915527,.2578986883163452,-.28516411781311035,.20092368125915527,.2862345576286316,-.22941040992736816,.20092368125915527,.29594337940216064,-.16760706901550293,.20092356204986572,.2942456603050232,.36760687828063965],userData:{type:"LINE",color:"#589DFF",tagId:"line-061"}},{name:"line-062",position:[3.042546272277832,1.1620593070983887,.39142489433288574],rotation:[0,0,-0],scale:[1,1,1],points:[-.3439522385597229,1792541581835394e-23,2.605891704559326,.243952214717865,1792541581835394e-23,2.605891704559326,.27485400438308716,17555876752339827e-24,2.600996971130371,.30273085832595825,16483525655530684e-24,2.5867931842803955,.3248540759086609,14813281268288847e-24,2.5646700859069824,.339057981967926,12708625263258e-21,2.5367932319641113,.3439522385597229,10375615033808572e-24,2.5058915615081787,.3439522385597229,-1792541581835394e-23,-2.605891704559326],userData:{type:"LINE",color:"#589DFF",tagId:"line-062"}},{name:"line-063",position:[2.524484395980835,.6459704637527466,3.750715494155884],rotation:[0,0,-0],scale:[1,1,1],points:[.19254469871520996,-14901161193847656e-24,-.43924546241760254,.19254422187805176,-14901161193847656e-24,.23924565315246582,.182755708694458,-14901161193847656e-24,.30104899406433105,.15434765815734863,-14901161193847656e-24,.35680270195007324,.11010193824768066,-14901161193847656e-24,.4010488986968994,.05434823036193848,-14901161193847656e-24,.4294569492340088,-.007455587387084961,-14901161193847656e-24,.43924546241760254,-.19254469871520996,14901161193847656e-24,.43924546241760254],userData:{type:"LINE",color:"#26FF51",tagId:"line-063"}},{name:"line-064",position:[-1.6657730340957642,.6459704637527466,3.7869722843170166],rotation:[0,0,-0],scale:[-1,1,1],points:[.1757509708404541,-14901161193847656e-24,-.40038323402404785,.1757504940032959,-14901161193847656e-24,.20038342475891113,.16596198081970215,-14901161193847656e-24,.26218676567077637,.13755393028259277,-14901161193847656e-24,.31794047355651855,.0933082103729248,-14901161193847656e-24,.3621866703033447,.03755450248718262,-14901161193847656e-24,.3905947208404541,-.02424931526184082,-14901161193847656e-24,.40038323402404785,-.1757509708404541,14901161193847656e-24,.40038323402404785],userData:{type:"LINE",color:"#FFBA10",tagId:"line-064"}},{name:"line-065",position:[-5.656226634979248,.4455268681049347,3.9274609088897705],rotation:[0,0,-0],scale:[-1,1,1],points:[2384185791015625e-22,0,-.5917713642120361,2384185791015625e-22,0,-.5917713642120361,-2384185791015625e-22,0,.5917713642120361],userData:{type:"LINE",color:"#FFBA10",tagId:"line-065",isReverse:!0}},{name:"line-066",position:[-5.098808765411377,.4455268681049347,1.1196701526641846],rotation:[0,0,-0],scale:[-1,1,1],points:[-.19961190223693848,0,-0,.19961190223693848,0,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-066",isReverse:!0}},{name:"line-067",position:[-5.773139953613281,.40409427881240845,5.637032508850098],rotation:[0,0,-0],scale:[-1,1,1],points:[-.116912841796875,.04143259674310684,-.44943976402282715,-.1169133186340332,-.03225279599428177,.34986186027526855,-.11201953887939453,-.03508951514959335,.3806331157684326,-.09781551361083984,-.03764855116605759,.40839219093322754,-.07569217681884766,-.03967941552400589,.4304220676422119,-.04781532287597656,-.04098331183195114,.444566011428833,-.016913414001464844,-.04143259674310684,.44943976402282715,.1169133186340332,-.04143259674310684,.44943976402282715],userData:{type:"LINE",color:"#FFBA10",tagId:"line-067",isReverse:!0}},{name:"line-068",position:[-5.101800918579102,.4455268979072571,4.836771011352539],rotation:[0,0,-0],scale:[-1,1,1],points:[.2026042938232422,-14901161193847656e-24,-0,-.2026042938232422,14901161193847656e-24,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-068"}},{name:"line-069",position:[-7.3202290534973145,.35653918981552124,6.080547332763672],rotation:[0,0,-0],scale:[-1,1,1],points:[.623592734336853,0,-4707994349928413e-23,-.623592734336853,0,4707994349928413e-23],userData:{type:"LINE",color:"#FFBA10",tagId:"line-069"}},{name:"line-070",position:[-6.375065326690674,.35539382696151733,1.9276220798492432],rotation:[0,0,-0],scale:[-1,1,1],points:[31283526880088175e-25,0,-1.1427948474884033,-31283526880088175e-25,0,1.1427948474884033],userData:{type:"LINE",color:"#FFBA10",tagId:"line-070"}},{name:"line-071",position:[-6.375065326690674,.35539382696151733,-.898436427116394],rotation:[0,0,-0],scale:[-1,1,1],points:[-29556517233686463e-25,0,-1.026008129119873,29556517233686463e-25,0,1.026008129119873],userData:{type:"LINE",color:"#FFBA10",tagId:"line-071"}},{name:"line-072",position:[-7.156309127807617,.35539382696151733,-3.8609564304351807],rotation:[0,0,-0],scale:[-1,1,1],points:[.7726735472679138,0,-1.282936453819275,-.6726735830307007,0,-1.282936453819275,-.7035752534866333,0,-1.278042197227478,-.7314521074295044,0,-1.2638381719589233,-.7535752654075623,0,-1.2417150735855103,-.7677791714668274,0,-1.2138382196426392,-.772673487663269,0,-1.1829365491867065,-.7726735472679138,0,1.282936453819275],userData:{type:"LINE",color:"#FFBA10",tagId:"line-072"}},{name:"line-073",position:[-7.303126811981201,.7688483595848083,4.583131790161133],rotation:[0,0,-0],scale:[-1,1,1],points:[.6370112895965576,-.4123091697692871,1.175438642501831,-.5370112657546997,-.4123091697692871,1.175438642501831,-.5679129362106323,-.40741482377052307,1.175438642501831,-.5957897901535034,-.39321088790893555,1.175438642501831,-.617913007736206,-.3710877001285553,1.175438642501831,-.6321169137954712,-.3432108759880066,1.175438642501831,-.6370112895965576,-.3123091757297516,1.175438642501831,-.6370112895965576,.31230926513671875,1.175438642501831,-.6370112895965576,.34321093559265137,1.170544147491455,-.6370112895965576,.37108778953552246,1.1563401222229004,-.6370112895965576,.39321088790893555,1.1342170238494873,-.6370112895965576,.40741491317749023,1.1063401699066162,-.6370112895965576,.4123091697692871,1.0754384994506836,-.6370112895965576,.4123091697692871,-1.175438642501831],userData:{type:"LINE",color:"#FF9339",tagId:"line-073",isReverse:!0}},{name:"line-074",position:[-6.6661152839660645,1.1811575889587402,1.6098499298095703],rotation:[0,0,-0],scale:[-1,1,1],points:[-3367830458955723e-24,0,1.1396229267120361,3367830458955723e-24,0,-1.1396229267120361],userData:{type:"LINE",color:"#FF9339",tagId:"line-074",isReverse:!0}},{name:"line-075",position:[-6.6661152839660645,1.1811575889587402,-1.2082641124725342],rotation:[0,0,-0],scale:[-1,1,1],points:[-11929415677514044e-24,0,1.0262212753295898,11929415677514044e-24,0,-1.0262212753295898],userData:{type:"LINE",color:"#FF9339",tagId:"line-075",isReverse:!0}},{name:"line-076",position:[-7.3007402420043945,.5563091039657593,-5.475044250488281],rotation:[0,0,-0],scale:[-1,1,1],points:[-.6346246004104614,.19976988434791565,-9019865956361173e-22,-.6346246004104614,-.09976988285779953,-9019865956361173e-22,-.629730224609375,-.13067159056663513,-9023560778587125e-22,-.6155261993408203,-.15854841470718384,-9034284857989405e-22,-.5934031009674072,-.1806715875864029,-9050987728187465e-22,-.5655262470245361,-.1948755383491516,-9072033435586491e-22,-.5346245765686035,-.19976988434791565,-9095364248423721e-22,.6346246004104614,-.19976988434791565,9095364248423721e-22],userData:{type:"LINE",color:"#FF9339",tagId:"line-076"}},{name:"line-077",position:[-4.300131320953369,1.1620593070983887,-4.122428894042969],rotation:[0,0,-0],scale:[-1,1,1],points:[-1.6901767253875732,1301203411685492e-23,1.3565807342529297,-1.6901767253875732,-5462212016027479e-24,-1.2565803527832031,-1.6852824687957764,-7795314616032556e-24,-1.2874832153320312,-1.6710786819458008,-9899885355935112e-24,-1.315359115600586,-1.6489553451538086,-11570151059459022e-24,-1.3374824523925781,-1.6210784912109375,-12642523472550238e-24,-1.3516864776611328,-1.5901768207550049,-1301203411685492e-23,-1.3565807342529297,1.6901767253875732,-1301203411685492e-23,-1.3565807342529297],userData:{type:"LINE",color:"#FF9339",tagId:"line-077"}},{name:"line-078",position:[-1.285418152809143,.9055443406105042,-3.349241018295288],rotation:[0,0,-0],scale:[-1,1,1],points:[-.20092391967773438,-.2565150558948517,-.5930463075637817,.0009241104125976562,-.2565150558948517,-.5930463075637817,.06272697448730469,-.24672694504261017,-.5930463075637817,.11848068237304688,-.21831856667995453,-.5930463075637817,.16272735595703125,-.17407231032848358,-.5930463075637817,.19113540649414062,-.1183186024427414,-.5930463075637817,.20092391967773438,-.05651542544364929,-.5930463075637817,.20092380046844482,.056773439049720764,-.5930463075637817,.20092374086380005,.11856420338153839,-.5832575559616089,.20092374086380005,.17428113520145416,-.5548497438430786,.20092368125915527,.21847029030323029,-.5106035470962524,.20092368125915527,.24680623412132263,-.45484986901283264,.20092368125915527,.2565150558948517,-.3930465281009674,.20092356204986572,.2565149664878845,.5930463075637817],userData:{type:"LINE",color:"#FF9339",tagId:"line-078"}},{name:"line-079",position:[-3.2765746116638184,1.1253948211669922,-2.4581055641174316],rotation:[0,0,-0],scale:[-1,1,1],points:[-1.0880753993988037,-.47942429780960083,-23409114646710805e-24,-.28019803762435913,-.47942429780960083,-23409114646710805e-24,-.24929624795913696,-.4745299220085144,-23778632396442845e-24,-.22141939401626587,-.46032601594924927,-24850997704106703e-24,-.19929617643356323,-.43820279836654663,-26521249196775898e-24,-.1850922703742981,-.4103260040283203,-2862589099095203e-23,-.18019801378250122,-.3794242739677429,-30958908325828816e-24,-.18019801378250122,.3794242739677429,30958908325828816e-24,-.1753036379814148,.4103260636329651,2862588743823835e-23,-.16109973192214966,.4382029175758362,2652124564406222e-23,-.13897663354873657,.4603261351585388,24850987045965667e-24,-.11109977960586548,.47453004121780396,2377862173830181e-23,-.08019810914993286,.47942429780960083,23409118199424483e-24,1.0880753993988037,.47942429780960083,23409118199424483e-24],userData:{type:"LINE",color:"#FFBA10",tagId:"line-079",isReverse:!0}},{name:"line-080",position:[-1.463008999824524,.6459704637527466,-1.9116439819335938],rotation:[0,0,-0],scale:[-1,1,1],points:[.37851500511169434,-14901161193847656e-24,-.19853568077087402,.37851452827453613,-14901161193847656e-24,-.0014641284942626953,.3687260150909424,-14901161193847656e-24,.06033921241760254,.340317964553833,-14901161193847656e-24,.11609292030334473,.29607224464416504,-14901161193847656e-24,.1603391170501709,.24031853675842285,-14901161193847656e-24,.18874716758728027,.17851471900939941,-14901161193847656e-24,.19853568077087402,-.37851500511169434,14901161193847656e-24,.19853568077087402],userData:{type:"LINE",color:"#FFBA10",tagId:"line-080"}},{name:"line-081",position:[-1.285418152809143,.8678137063980103,2.336845636367798],rotation:[0,0,-0],scale:[-1,1,1],points:[-.20092391967773438,-.22215157747268677,-.38690096139907837,.0009241104125976562,-.22215157747268677,-.38690096139907837,.06272697448730469,-.21236348152160645,-.38690096139907837,.11848068237304688,-.1839551329612732,-.38690096139907837,.16272735595703125,-.13970884680747986,-.38690096139907837,.19113540649414062,-.08395514637231827,-.38690102100372314,.20092391967773438,-.02215198427438736,-.38690102100372314,.20092380046844482,.09620177745819092,-.38690102100372314,.20092374086380005,.15799254179000854,-.3771122694015503,.20092374086380005,.21370947360992432,-.34870445728302,.20092368125915527,.2578986883163452,-.30445826053619385,.20092368125915527,.2862345576286316,-.24870455265045166,.20092368125915527,.29594337940216064,-.18690121173858643,.20092356204986572,.2942456603050232,.38690102100372314],userData:{type:"LINE",color:"#FF9339",tagId:"line-081"}},{name:"line-082",position:[-5.177711486816406,.4455268979072571,-.6676099300384521],rotation:[0,0,-0],scale:[-1,1,1],points:[.2785148620605469,-14901161193847656e-24,-0,-.2785148620605469,14901161193847656e-24,-0],userData:{type:"LINE",color:"#FFBA10",tagId:"line-082"}},{name:"line-083",position:[-5.656226634979248,.4455268681049347,-1.7478187084197998],rotation:[0,0,-0],scale:[-1,1,1],points:[2384185791015625e-22,0,-.7783417701721191,2384185791015625e-22,0,-.7783417701721191,-2384185791015625e-22,0,.7783417701721191],userData:{type:"LINE",color:"#FFBA10",tagId:"line-083",isReverse:!0}},{name:"line-084",position:[-4.704193115234375,1.2263033390045166,4.097603797912598],rotation:[0,0,-0],scale:[1,1,1],points:[2177166464889524e-22,.37851500511169434,-.7391667366027832,2177166464889524e-22,.37851500511169434,-.7391667366027832,-13643500551552279e-24,.37851452827453613,.5391669273376465,-2385322517284294e-23,.3687260150909424,.6009702682495117,-3687546978881073e-23,.340317964553833,.6567239761352539,-5143530046325395e-23,.29607224464416504,.7009701728820801,-6610782321558872e-23,.24031853675842285,.7293782234191895,-7945664037833922e-23,.17851471900939941,.7391667366027832,-2177166464889524e-22,-.37851500511169434,.7391667366027832],userData:{type:"LINE",color:"#FFBA10",tagId:"line-084",isReverse:!0}},{name:"line-085",position:[-4.704192161560059,1.226304054260254,-1.4240236282348633],rotation:[0,0,-0],scale:[1,1,1],points:[22003386845881323e-23,.37851500511169434,-.7564132213592529,22003386845881323e-23,.37851500511169434,-.7564132213592529,-1596071541598576e-23,.37851452827453613,.5564134120941162,-26170432931849064e-24,.3687260150909424,.6182167530059814,-39192684653244214e-24,.340317964553833,.6739704608917236,-53752515327687433e-24,.29607224464416504,.7182166576385498,-684250380800222e-22,.24031853675842285,.7466247081756592,-817738552427727e-22,.17851471900939941,.7564132213592529,-22003386845881323e-23,-.37851500511169434,.7564132213592529],userData:{type:"LINE",color:"#FFBA10",tagId:"line-085",isReverse:!0}},{name:"line-046",position:[8.462522506713867,1.4130845069885254,4.9909257888793945],rotation:[0,0,-0],scale:[-1,1,1],points:[-.39951375126838684,.31029295921325684,7764100473650615e-26,.29951372742652893,.31029295921325684,-28971541610189888e-24,.3304154574871063,.3053986132144928,29205651230768126e-25,.35829225182533264,.2911946773529053,-23518488490026357e-24,.3804154694080353,.269071489572525,-19210945723102668e-24,.3946194350719452,.24119466543197632,-1438078811588639e-23,.39951375126838684,.2102929651737213,-3930314562694548e-23,.39951375126838684,-.31029295921325684,3930314562694548e-23],userData:{type:"LINE",color:"#26FF51",tagId:"line-046",running:!0}}],Z0={animate:"animate",dispose:"dispose",orbitChange:"orbitChange",load:{start:"load:start",processing:"load:processing",finish:"load:finish"},click:{raycaster:"click:raycaster"},dblclick:{raycaster:"dblclick:raycaster"},mousemove:{raycaster:"mousemove:raycaster"},resize:"resize"},Fe={font:{fov:5,x:0,y:28,z:.01,scale:1},vertical:{fov:5,x:0,y:23,z:23,scale:1},default:{fov:40,x:16,y:16,z:16,scale:1}};class Q0{constructor(){x(this,"isMoving",!1);x(this,"isLookingTo",!1)}sceneInit(e,t,s){this.setCameraView("default",e,t,s)}setCameraView(e="default",t,s,n){const{x:a,y:i,z:r}=s.target,{x:o,y:c,z:u}=n.position;let l={...Fe[e],mx:0,my:0,mz:0,gx:0,gy:0,gz:0};const{x:d,y:f,z:m}=t.position,T={fov:t.fov,x:d,y:f,z:m,scale:n.scale.x,mx:a,my:i,mz:r,gx:o,gy:c,gz:u};new ee(T).to(l,1500).easing(re.Cubic.InOut).onUpdate(h=>{t.position.set(h.x,h.y,h.z),n.scale.set(h.scale,h.scale,h.scale),n.position.set(h.gx,h.gy,h.gz),t.lookAt(0,0,0),s.target.set(h.mx,h.my,h.mz)}).onStart(()=>{s.enabled=!1}).onComplete(()=>{t.fov=l.fov,s.enabled=!0}).start()}lookAt(e,t,s,n){if(this.isLookingTo)return;const{x:a,y:i,z:r}=e.position,{x:o,y:c,z:u}=t.position,{x:l,y:d,z:f}=s.target,m={cameraX:o,cameraY:c,cameraZ:u,ctrTargetX:l,ctrTargetY:d,ctrTargetZ:f,fov:t.fov},T={cameraX:a+10,cameraY:i+10,cameraZ:r+10,ctrTargetX:a,ctrTargetY:i,ctrTargetZ:r,fov:Fe.default.fov};new ee(m).to(T,1e3).easing(re.Cubic.InOut).onUpdate(h=>{t.position.set(h.cameraX,h.cameraY,h.cameraZ),s.target.set(h.ctrTargetX,h.ctrTargetY,h.ctrTargetZ),t.fov=h.fov,t.lookAt(e.position)}).onStart(()=>{this.isMoving=!0,this.isLookingTo=!0,s.enabled=!1}).onComplete(()=>{n&&n(),setTimeout(()=>{this.isMoving=!1,this.isLookingTo=!1,s.enabled=!0},200)}).start()}}const pe=p=>(Jt("data-v-00f562e6"),p=p(),e0(),p),$0={class:"w-full h-full main-container relative bg-black"},J0=pe(()=>w("div",{id:"targetEl",class:"w-full h-full"},null,-1)),en={class:"btns absolute bottom-4 right-4 flex flex-col color-green"},tn={class:"btns absolute bottom-4 left-4 flex flex-col color-green"},nn=pe(()=>w("div",{class:"name"},[w("p",{class:"name-tx"},t0("equipmentName"))],-1)),sn=$t('<div class="info-content" data-v-00f562e6><p class="info-item" data-v-00f562e6><span class="label" data-v-00f562e6>item.name</span><span class="value fwb" data-v-00f562e6>item.display</span></p><p class="info-item" data-v-00f562e6><span class="label" data-v-00f562e6>item.name</span><span class="value fwb" data-v-00f562e6>item.display</span></p><p class="info-item" data-v-00f562e6><span class="label" data-v-00f562e6>item.name</span><span class="value fwb" data-v-00f562e6>item.display</span></p></div>',1),an=pe(()=>w("div",{class:"device-line"},null,-1)),on={key:0,class:"loading absolute flex justify-center items-center top-0 left-0 w-full h-full z-12 color-white"},rn=Vt({__name:"guangZhou",setup(p){let e,t=new U0,s,n,a,i=0;const r="/demo/",o=zt(!1);Wt(async()=>{c()}),Xt(()=>{M()});async function c(){if(o.value)return;o.value=!0,e=new Dt("targetEl"),s=new W0,n=new Q0,a=new X0(191299),e.initThree(),e.scene.fog=new vt(new F(1121588),50,100),new $().loadAsync(`${r}model/acoustical_shell_1k.jpg`).then(q=>{q.mapping=Ct,e.scene.environment=q});const I=await t.loadModelAsync(`${r}model/guangzhouM-processed.glb`);let D=s.fmtObject3d(I);e.scene.add(D),e.addStats(),e.scene.add(a.boxHelper),e.initRaycaster(),e.setRaycasterObjects(s.selectableModels),e.emitter.on(Z0.click.raycaster,q=>{m(q)}),e.controls.addEventListener("change",u),l(),d(),o.value=!1}const u=Ot(()=>{!n||n.isLookingTo||n.isMoving||T()},100,{leading:!0});function l(){e==null||e.render(),kt(),i=requestAnimationFrame(l)}async function d(){if(!e)return;const L=await new $().loadAsync(`${r}image/line6.png`);s.loadTubeLine(Y0,L),q0.forEach(I=>{s==null||s.updateDevice(I)})}let f=null;function m(L){if(n!=null&&n.isLookingTo||n!=null&&n.isMoving||(T(),!L.length))return;const I=L[0].object||{},D=jt(I,s.isSelectAble);D&&g(D)}function T(){f&&s&&s.toggleDeviceSelect(f,!1),f=null,R.opacity=0,a&&a.setVisible(!1),k()}function g(L){s&&s.toggleDeviceSelect(L,!0),a&&a.attach(L),n&&n.lookAt(L,e==null?void 0:e.camera,e==null?void 0:e.controls,()=>k(L)),f=L}function h(L){n==null||n.setCameraView(L,e==null?void 0:e.camera,e==null?void 0:e.controls,s==null?void 0:s.modelGroup),T()}let A={UNIT:!1,TOWER:!1};function E(L){s&&(A[L]=!A[L],s.toggleShowTypeTips(L,A[L]))}let y=!0;function S(){y=!y,s==null||s.setTubeLineFlow(y)}function N(){c()}function M(){e!=null&&e.controls&&e.controls.removeEventListener("change",u),e==null||e.dispose(),s==null||s.dispose(),a==null||a.dispose(),cancelAnimationFrame(i),e=null}const R=qt({top:0,left:0,opacity:1,pointEvent:"auto"});let _=null;function k(L){if(L){_&&(_.stop(),R.opacity=0);const{x:I,y:D}=Kt(L,e==null?void 0:e.camera,e==null?void 0:e.domEl);R.top=D-20,R.left=I,_=new ee(R),_.to({opacity:1,top:D,left:I},200).easing(re.Cubic.Out).start()}else R.opacity=0}function He(){console.log(" toHistory =====> :")}return(L,I)=>(Ie(),we("div",$0,[J0,w("div",{class:"btns flex absolute top-0 right-0 color-green"},[w("div",{class:"btn border px4 py2 cursor-pointer",onClick:N},"load"),w("div",{class:"btn border px4 py2 cursor-pointer",onClick:M},"dispose")]),w("div",en,[w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:I[0]||(I[0]=D=>h("font"))},"view-font"),w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:I[1]||(I[1]=D=>h("vertical"))},"view-vertical"),w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:I[2]||(I[2]=D=>h("default"))},"view-default")]),w("div",tn,[w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:I[3]||(I[3]=D=>E("UNIT"))},"UNIT-tips"),w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:I[4]||(I[4]=D=>E("TOWER"))},"TOWER-tips"),w("div",{class:"bnt border px4 py2 cursor-pointer",onClick:S},"TUBE-flow")]),w("div",{id:"deviceInfo",class:"device-info absolute",style:Yt({top:K(R).top+"px",left:K(R).left+"px",opacity:K(R).opacity,pointerEvent:K(R).pointEvent})},[w("div",{class:"device-inner"},[w("div",{class:"header"},[nn,w("div",{id:"historyBtn",class:"history-btn",onClick:He},"")]),sn]),an],4),K(o)?(Ie(),we("div",on,[Zt(Pt)])):Qt("",!0)]))}}),hn=n0(rn,[["__scopeId","data-v-00f562e6"]]);export{hn as default};
