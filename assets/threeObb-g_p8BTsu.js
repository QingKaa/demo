import{u as S}from"./useHelper-BgGx8SJu.js";import{_ as L,j as C,C as A,a3 as W,g as O,E as v,Z as E,$ as G,S as j,a0 as k,A as R,V as m,a4 as h,c as w,M as x}from"./OrbitControls-sBDYM_KL.js";import{g as T}from"./lil-gui.module.min-Bc0DeA9g.js";import{_ as U,p as V,o as q,c as F,b as g}from"./index-BdHghL4a.js";import{O as c}from"./OBB-Cmtq50qs.js";const I={class:"page-container main-container w-full h-full relative"},f=1920728,P={__name:"threeObb",setup($){const{createGridHelper:y,createAxesHelper:M}=S(),z="/demo/";let r,l,i,p;const s=[],d=new T,u={x:0,y:0,z:0};d.add(u,"x",-100,100,.02),d.add(u,"y",-100,100,.02),d.add(u,"z",-100,100,.02),d.onChange(({object:o})=>{const{x:t,y:n,z:e}=o;a&&a.position.set(t,n,e),a.updateMatrix(),a.updateMatrixWorld()});function _(){r=new L,r.fog=new C(new A(1121588),50,100);const o=new W(16777215,2236962,1.5);o.position.set(1,1,1),r.add(o),new O().loadAsync(`${z}model/acoustical_shell_1k.jpg`).then(e=>{e.mapping=v,r.environment=e}),l=new E(75,window.innerWidth/window.innerHeight,.1,1e3),l.position.set(0,20,20),i=new G({logarithmicDepthBuffer:!0,antialias:!0,alpha:!0,precision:"mediump",premultipliedAlpha:!0}),i.shadowMap.enabled=!0,i.outputColorSpace=j,i.setSize(window.innerWidth,window.innerHeight),document.getElementById("webglTarget").appendChild(i.domElement),p=new k(l,i.domElement),p.update();const n=new R(16777215,1);r.add(n),r.add(y()),r.add(M()),B()}function D(){const o=new m(1,1,1),t=new h(o.x,o.y,o.z);t.userData.obb=new c,t.userData.obb.halfSize.copy(o).multiplyScalar(.5);for(let n=0;n<50;n++){const e=new w(t,new x({color:65280}));e.position.x=10*Math.random(),e.position.y=10*Math.random(),e.position.z=10*Math.random(),e.matrixAutoUpdate=!1,r.add(e),e.userData.obb=new c,s.push({content:e,size:{width:.5,height:.5,depth:.5},direction:new m(Math.random(),Math.random(),Math.random()).normalize()})}}let a;function B(){const o=new m(1,1,1),t=new h(o.x,o.y,o.z);t.userData.obb=new c,t.userData.obb.halfSize.copy(o).multiplyScalar(.5),a=new w(t,new x({color:f})),a.matrixAutoUpdate=!1,a.userData.obb=new c,r.add(a)}V(()=>{_(),D(),b()});function b(){requestAnimationFrame(b),a.updateMatrix(),a.updateMatrixWorld(),a.userData.obb.copy(a.geometry.userData.obb),a.userData.obb.applyMatrix4(a.matrixWorld),a.material.color.setHex(f);for(let t=0,n=s.length;t<n;t++){const e=s[t].content;e.updateMatrix(),e.updateMatrixWorld(),e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld),e.material.color.setHex(65280)}const o=a.userData.obb;for(let t=0,n=s.length;t<n;t++){const{content:e,size:N}=s[t],H=e.userData.obb;o.intersectsOBB(H)===!0&&(a.material.color.setHex(16711680),e.material.color.setHex(16711680))}p.update(),i.render(r,l)}return(o,t)=>(q(),F("div",I,t[0]||(t[0]=[g("div",{class:"webgl-target w-full h-full",id:"webglTarget"},null,-1),g("p",{class:"tips absolute left-0 top-0 w-full text-center z-1 color-white font-size-3"},"通过改变右上角x,y,z控制蓝色物体的位置，检测物体与其他物体的碰撞检测",-1)])))}},Y=U(P,[["__scopeId","data-v-902baee7"]]);export{Y as default};
