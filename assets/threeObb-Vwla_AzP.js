import{a1 as A,a3 as O,M as y,_ as G,j as C,C as v,a4 as j,g as E,E as R,Z as k,$ as I,S as F,a0 as T,A as U,a5 as V,V as u,c as q,Y as $,x as N}from"./OrbitControls-DYZe1cjh.js";import{_ as P,s as Y,o as Z,c as J,p as K,i as Q,b as X}from"./index-BnFIS60n.js";import{O as h}from"./OBB-DACWSzlM.js";import{G as ee}from"./GLTFLoader-Bsnqwp8i.js";import"./BufferGeometryUtils-BQDJ8BH0.js";const te=()=>({createAxesHelper:(d=5)=>new A(d),createGridHelper:(d,w,o,s)=>new O(d,w,o,s)}),ae=l=>(K("data-v-d3f4466c"),l=l(),Q(),l),oe={class:"page-container main-container w-full h-full"},re=ae(()=>X("div",{class:"webgl-target w-full h-full",id:"webglTarget"},null,-1)),ne=[re],se={__name:"threeObb",setup(l){const{createGridHelper:f,createAxesHelper:d}=te(),w="/demo/";let o,s,n,g;const i=[],_=new URL("/demo/assets/arm1-Bn8R3OR7.glb",import.meta.url).href,D=new y({color:65280}),p=[];function H(){new ee().load(_,r=>{const e=r.scene;e.traverse(t=>{if(t.isMesh){const x=t.material.color;t.material=D.clone(),t.material.color=x;const c=new N(new u).setFromObject(t).getSize(new u);t.geometry.userData.obb=new h,t.geometry.userData.obb.halfSize.set(c.multiplyScalar(.5)),t.userData.obb=new h,t.userData.obb.copy(t.geometry.userData.obb),t.userData.obb.applyMatrix4(t.matrixWorld),p.push({content:t,size:{width:c.x,height:c.y,depth:c.z},direction:new u(Math.random(),Math.random(),Math.random()).normalize()})}}),o.add(e)})}function z(){o=new G,o.fog=new C(new v(1121588),50,100);const a=new j(16777215,2236962,1.5);a.position.set(1,1,1),o.add(a),new E().loadAsync(`${w}model/acoustical_shell_1k.jpg`).then(t=>{t.mapping=R,o.environment=t}),s=new k(75,window.innerWidth/window.innerHeight,.1,1e3),s.position.set(0,20,20),n=new I({logarithmicDepthBuffer:!0,antialias:!0,alpha:!0,precision:"mediump",premultipliedAlpha:!0}),n.shadowMap.enabled=!0,n.outputColorSpace=F,n.setSize(window.innerWidth,window.innerHeight),document.getElementById("webglTarget").appendChild(n.domElement),g=new T(s,n.domElement),g.update();const e=new U(16777215,1);o.add(e),o.add(f()),o.add(d()),H()}let b=Math.random();function B(){const a=new V(1,1,1);a.userData.obb=new h,a.userData.obb.halfSize.copy(new u(1,1,1).multiplyScalar(.5));for(let r=0;r<50;r++){const e=new q(a,new y({color:65280}));e.position.x=5*Math.random(),e.position.y=5*Math.random(),e.position.z=5*Math.random(),o.add(e),e.userData.obb=new h,e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld),i.push({content:e,size:{width:1,height:1,depth:1},direction:new u(Math.random(),Math.random(),Math.random()).normalize()})}}Y(()=>{z(),B(),M()});const S=new $;function M(){b+=.1,S.getDelta(),requestAnimationFrame(M);for(let a=0,r=i.length;a<r;a++){const{content:e,direction:t}=i[a];e.position.x+=t.x*Math.cos(b),e.position.y+=t.y*Math.cos(b),e.position.z+=t.z*Math.cos(b),e.updateMatrix(),e.updateMatrixWorld(),e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld),e.material.color.setHex(302836)}for(let a=0,r=p.length;a<r;a++){const{content:e}=p[a];e.updateMatrix(),e.updateMatrixWorld(),e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld)}for(let a=0,r=p.length;a<r;a++){const{content:e,size:t}=p[a],x=e.userData.obb;for(let m=0,c=i.length;m<c;m++){const L=i[m].content,W=i[m].content.userData.obb;x.intersectsOBB(W)&&L.material.color.setHex(16711680)}}g.update(),n.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,n.render(o,s)}return(a,r)=>(Z(),J("div",oe,ne))}},me=P(se,[["__scopeId","data-v-d3f4466c"]]);export{me as default};
