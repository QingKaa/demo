import{u as C}from"./useHelper-BgGx8SJu.js";import{_ as A,j as W,C as v,a3 as O,g as E,E as I,Z as G,$ as j,S as k,a0 as R,A as T,V as b,a4 as w,c as x,M as g}from"./OrbitControls-sBDYM_KL.js";import{g as U}from"./lil-gui.module.min-Bc0DeA9g.js";import{_ as V,s as q,o as F,c as P,p as $,i as N,b as _}from"./index-Bh25nWXI.js";import{O as p}from"./OBB-Cmtq50qs.js";const y=l=>($("data-v-902baee7"),l=l(),N(),l),Z={class:"page-container main-container w-full h-full relative"},J=y(()=>_("div",{class:"webgl-target w-full h-full",id:"webglTarget"},null,-1)),K=y(()=>_("p",{class:"tips absolute left-0 top-0 w-full text-center z-1 color-white font-size-3"},"通过改变右上角x,y,z控制蓝色物体的位置，检测物体与其他物体的碰撞检测",-1)),Q=[J,K],f=1920728,X={__name:"threeObb",setup(l){const{createGridHelper:M,createAxesHelper:z}=C(),D="/demo/";let r,c,s,u;const i=[],d=new U,m={x:0,y:0,z:0};d.add(m,"x",-100,100,.02),d.add(m,"y",-100,100,.02),d.add(m,"z",-100,100,.02),d.onChange(({object:o})=>{const{x:t,y:n,z:e}=o;a&&a.position.set(t,n,e),a.updateMatrix(),a.updateMatrixWorld()});function S(){r=new A,r.fog=new W(new v(1121588),50,100);const o=new O(16777215,2236962,1.5);o.position.set(1,1,1),r.add(o),new E().loadAsync(`${D}model/acoustical_shell_1k.jpg`).then(e=>{e.mapping=I,r.environment=e}),c=new G(75,window.innerWidth/window.innerHeight,.1,1e3),c.position.set(0,20,20),s=new j({logarithmicDepthBuffer:!0,antialias:!0,alpha:!0,precision:"mediump",premultipliedAlpha:!0}),s.shadowMap.enabled=!0,s.outputColorSpace=k,s.setSize(window.innerWidth,window.innerHeight),document.getElementById("webglTarget").appendChild(s.domElement),u=new R(c,s.domElement),u.update();const n=new T(16777215,1);r.add(n),r.add(M()),r.add(z()),H()}function B(){const o=new b(1,1,1),t=new w(o.x,o.y,o.z);t.userData.obb=new p,t.userData.obb.halfSize.copy(o).multiplyScalar(.5);for(let n=0;n<50;n++){const e=new x(t,new g({color:65280}));e.position.x=10*Math.random(),e.position.y=10*Math.random(),e.position.z=10*Math.random(),e.matrixAutoUpdate=!1,r.add(e),e.userData.obb=new p,i.push({content:e,size:{width:.5,height:.5,depth:.5},direction:new b(Math.random(),Math.random(),Math.random()).normalize()})}}let a;function H(){const o=new b(1,1,1),t=new w(o.x,o.y,o.z);t.userData.obb=new p,t.userData.obb.halfSize.copy(o).multiplyScalar(.5),a=new x(t,new g({color:f})),a.matrixAutoUpdate=!1,a.userData.obb=new p,r.add(a)}q(()=>{S(),B(),h()});function h(){requestAnimationFrame(h),a.updateMatrix(),a.updateMatrixWorld(),a.userData.obb.copy(a.geometry.userData.obb),a.userData.obb.applyMatrix4(a.matrixWorld),a.material.color.setHex(f);for(let t=0,n=i.length;t<n;t++){const e=i[t].content;e.updateMatrix(),e.updateMatrixWorld(),e.userData.obb.copy(e.geometry.userData.obb),e.userData.obb.applyMatrix4(e.matrixWorld),e.material.color.setHex(65280)}const o=a.userData.obb;for(let t=0,n=i.length;t<n;t++){const{content:e,size:Y}=i[t],L=e.userData.obb;o.intersectsOBB(L)===!0&&(a.material.color.setHex(16711680),e.material.color.setHex(16711680))}u.update(),s.render(r,c)}return(o,t)=>(F(),P("div",Z,Q))}},ne=V(X,[["__scopeId","data-v-902baee7"]]);export{ne as default};
